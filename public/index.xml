<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ç¼–ç¨‹ä¹‹è·¯ on ç¼–ç¨‹ä¹‹è·¯</title>
    <link>http://vonzhou.com/</link>
    <description>Recent content in ç¼–ç¨‹ä¹‹è·¯ on ç¼–ç¨‹ä¹‹è·¯</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Wed, 03 Apr 2019 00:00:00 +0000</lastBuildDate>
    <atom:link href="/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>HBase æŸ¥è¯¢ä¼˜åŒ–</title>
      <link>http://vonzhou.com/2019/hbase-query-optimize/</link>
      <pubDate>Wed, 03 Apr 2019 00:00:00 +0000</pubDate>
      
      <guid>http://vonzhou.com/2019/hbase-query-optimize/</guid>
      <description>

&lt;h2 id=&#34;åœºæ™¯&#34;&gt;åœºæ™¯&lt;/h2&gt;

&lt;p&gt;åœ¨&lt;a href=&#34;http://vonzhou.com/2019/hbase-page/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;ã€ŠHBase å®ç°åˆ†é¡µæŸ¥è¯¢ã€‹&lt;/a&gt;ä¸­æè¿°äº†ä¸€ä¸ªæŒ‰ç”¨æˆ·ç»´åº¦å’Œæ—¶é—´åŒºé—´æŸ¥è¯¢HBaseçš„åœºæ™¯ï¼Œä¸šåŠ¡ä¸æ–­å¤æ‚åè¡ç”Ÿå‡ºäº†å¦ä¸€ä¸ªåœºæ™¯ï¼šéœ€è¦æŸ¥è¯¢ä¸€æ®µæ—¶é—´æ®µå†…ï¼Œä¸€ä¸ªåˆ—ç¬¦åˆç‰¹å®šæ¡ä»¶çš„æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;å‡è®¾æˆ‘ä»¬è¦æŸ¥è¯¢çš„æ•°æ®é¢†åŸŸæ¨¡å‹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;class BigMsg {
    private Long id;
    private Long insertTime;
    private List&amp;lt;Long&amp;gt; a;
    private Long b;
    private String c;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é—®é¢˜æŠ½è±¡ä¸ºï¼šä»HBaseæŸ¥è¯¢åˆ—b=b0çš„æ•°æ®ï¼Œå…¶ä¸­bå¾ˆç¨€ç–ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Long b0 = 123;
getDetailMsgs(b0);
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;è¡Œé”®è®¾è®¡ä¸æŸ¥è¯¢æ€§èƒ½&#34;&gt;è¡Œé”®è®¾è®¡ä¸æŸ¥è¯¢æ€§èƒ½&lt;/h2&gt;

&lt;p&gt;HBaseä½¿ç”¨æ—¶æœ€é‡è¦çš„è«è¿‡äºRowkeyçš„è®¾è®¡ï¼Œç›´æ¥å½±å“æ•°æ®çš„å­˜å‚¨å’ŒæŸ¥è¯¢æ€§èƒ½ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨æˆ‘ä»¬çš„åœºæ™¯ä¸­ï¼Œä¸ºäº†å®ç°æŒ‰ç…§æ—¶é—´åŒºé—´æŸ¥è¯¢ï¼ŒrowkeyåŒ…æ‹¬ç”¨æˆ·IDå’Œæ—¶é—´æˆ³ï¼Œå¯ä»¥ä½¿ç”¨è¿‡æ»¤å™¨ï¼ŒScançš„æ—¶å€™å–æˆ‘ä»¬éœ€è¦çš„æ•°æ®ï¼Œåœ¨æ•°æ®é‡å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼Œå¤§é‡çš„KeyValueä¼šé€åˆ°è¿‡æ»¤å™¨ç­›é€‰ï¼Œå¿…ç„¶å¾ˆä½æ•ˆã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç»éªŒæ³•åˆ™&#34;&gt;ç»éªŒæ³•åˆ™&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;rowkeyä¸å®œè¿‡é•¿&lt;/li&gt;
&lt;li&gt;å°½é‡å°†æŸ¥è¯¢çš„ç»´åº¦æˆ–ä¿¡æ¯å­˜å‚¨åœ¨rowkeyä¸­ï¼Œå› ä¸ºrowkeyç­›é€‰æ•°æ®çš„æ•ˆç‡æœ€é«˜&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¸‹é¢è¿™å¼ å›¾æ¥æºäºã€ŠHBaseæƒå¨æŒ‡å—ã€‹ï¼Œå±•ç¤ºäº†KeyValueçš„å„ä¸ªæ–¹é¢å¯¹ç­›é€‰æ•°æ®æ€§èƒ½çš„å½±å“ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://vonzhou.com/images/hbase-query-optimize-1.png&#34; alt=&#34;ä»å·¦åˆ°å³æŸ¥è¯¢æ€§èƒ½é€æ¸é™ä½&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;ä¼˜åŒ–æ–¹æ¡ˆ&#34;&gt;ä¼˜åŒ–æ–¹æ¡ˆ&lt;/h2&gt;

&lt;p&gt;å›åˆ°æˆ‘ä»¬çš„é—®é¢˜ä¸Šæ¥ã€‚&lt;/p&gt;

&lt;p&gt;è¦æŸ¥è¯¢ä¸€æ®µæ—¶é—´å†…ï¼Œåˆ—b=b0çš„æ•°æ®ï¼Œèƒ½æƒ³åˆ°æœ‰3ç§æ–¹æ³•ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ä½¿ç”¨filter&#34;&gt;ä½¿ç”¨Filter&lt;/h3&gt;

&lt;p&gt;æœ€ç›´æ¥çš„æƒ³æ³•æ˜¯Scançš„æ—¶å€™è®¾ç½®åˆ—å€¼è¿‡æ»¤å™¨ï¼Œä½†æ˜¯åˆ—bç¨€ç–ï¼Œæ‰€ä»¥åœ¨è¿™æ ·çš„æ•ˆç‡å¾ˆä½ã€‚&lt;/p&gt;

&lt;h3 id=&#34;rowkeyä¸­åŒ…å«&#34;&gt;rowkeyä¸­åŒ…å«&lt;/h3&gt;

&lt;p&gt;å¯ä»¥åœ¨è®¾è®¡rowkeyçš„æ—¶å€™çº³å…¥åˆ—bçš„ä¿¡æ¯ï¼Œè¿™æ ·æ–¹æ³•å­˜åœ¨ä»¥ä¸‹ç¼ºé™·ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ä¼šå¢åŠ rowkeyçš„å­˜å‚¨å¼€é”€&lt;/li&gt;
&lt;li&gt;ä¸€å¼€å§‹è®¾è®¡rowkeyçš„æ—¶å€™ï¼Œå¹¶ä¸èƒ½è€ƒè™‘åˆ°æ‰€æœ‰ç±»ä¼¼æƒ…å†µï¼Œæ‰€ä»¥çµæ´»æ€§ä¸å¥½&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;æ˜ å°„è¡¨&#34;&gt;æ˜ å°„è¡¨&lt;/h3&gt;

&lt;p&gt;æœ¬äººåœ¨å®é™…ä¸­é‡‡ç”¨çš„æ˜¯å¼•å…¥ä¸€ä¸ªæ˜ å°„è¡¨çš„æ–¹æ³•ï¼Œæ˜ å°„è¡¨ä¸­å­˜å‚¨äº†å¯¹åº”çš„åˆ—bå’ŒMsg HTableçš„rowkeyä¹‹é—´çš„å…³è”ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å®ç°&#34;&gt;å®ç°&lt;/h2&gt;

&lt;h3 id=&#34;æ˜ å°„ä¿¡æ¯å­˜å‚¨&#34;&gt;æ˜ å°„ä¿¡æ¯å­˜å‚¨&lt;/h3&gt;

&lt;p&gt;BigMsgä¿¡æ¯çš„å­˜å‚¨è§ã€ŠHBase å®ç°åˆ†é¡µæŸ¥è¯¢ã€‹ï¼Œä¹‹åéœ€è¦åŒæ—¶æ›´æ–°æ˜ å°„ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public void saveMapInfo(BigMsg msg, String msgRowkey) {
    Long b = msg.getB();
    Long insertTime = msg.getInsertTime();
    // å°†idä½œä¸ºrowkeyçš„ä¸€éƒ¨åˆ†ï¼Œé˜²æ­¢åˆ†å¸ƒå¼ç¯å¢ƒä¸‹é‡å¤
    Long id = msg.getId();
    try {
        Table table = getTable();
 		Put p = new Put(getRowKey(b, insertTime, id));
        p.addColumn(Bytes.toBytes(COL_FAMILY), 			Bytes.toBytes(MSG_ID_COL), Bytes.toBytes(msgRowkey));
        table.put(put);
    } catch (Exception e) {
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;æŸ¥è¯¢&#34;&gt;æŸ¥è¯¢&lt;/h3&gt;

&lt;p&gt;æœ‰äº†æ˜ å°„è¡¨ï¼ŒæŸ¥è¯¢çš„æ—¶å€™å°±æŒ‰æ—¶é—´èŒƒå›´å…ˆä»æ˜ å°„è¡¨çš„æ—¶å€™Scanå¾—åˆ°BigMsg HTableçš„rowkeyï¼Œç„¶åæ ¹æ®rowkeyï¼Œä½¿ç”¨æ‰¹é‡Getä»BigMsg HTableä¸­æŸ¥è¯¢å¾—åˆ°æœ€ç»ˆçš„æ•°æ®ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public void getDetailMsgs(Long b) throws Exception {
    // å…¨é‡çš„
    long start = 0L;
    long end = System.currentTimeMillis();

    Filter filter = new PageFilter(100);

    byte[] lastRow = null;
    byte[] startRow = getRowKey(b, end, 0L);
    byte[] endRow = getRowKey(b, start, Long.MAX_VALUE);

	// æ˜ å°„è¡¨
    Table table = getTable();
    while (true) {
        Scan scan = new Scan();
        scan.setFilter(filter);

        byte[] sr = null;
        if (lastRow != null) {
            sr = Bytes.add(lastRow, new byte[1]);
        } else {
            sr = startRow;
        }

        scan.setStartRow(sr);
        scan.setStopRow(endRow);
        ResultScanner scanner = table.getScanner(scan);
        Result result = null;
        int cnt = 0;
        List&amp;lt;String&amp;gt; msgRowkeys = new ArrayList&amp;lt;&amp;gt;();
        while ((result = scanner.next()) != null) {
            String rk = HBaseBytesUtil.getString(result.getValue(Bytes.toBytes(COL_FAMILY), Bytes.toBytes(&amp;quot;id&amp;quot;)));
            msgRowkeys.add(rk);
            cnt++;
            lastRow = result.getRow();
        }
        if (CollectionUtils.isNotEmpty(msgRowkeys)) {
            List&amp;lt;BigMsg&amp;gt; msgs = multiGet(msgRowkeys);
            // å¤„ç† Msgs
            }
        }
        scanner.close();
        if (cnt == 0) {
            break;
        }
    }
}

public List&amp;lt;BigMsg&amp;gt; multiGet(List&amp;lt;String&amp;gt; msgRowkeys) throws Exception {
    List&amp;lt;BigMsg&amp;gt; res = new ArrayList&amp;lt;&amp;gt;();
    Table table = getMsgTable();

    List&amp;lt;Get&amp;gt; gets = new ArrayList&amp;lt;&amp;gt;();
    for (String r : msgRowkeys) {
        Get g = new Get(Bytes.toBytes(r));
        g.addFamily(Bytes.toBytes(COL_FAMILY));
        gets.add(g);
    }
    Result[] rs = table.get(gets);
    if (ArrayUtils.isNotEmpty(rs)) {
        for (Result r : rs) {
            res.add(getMsgFromResult(r));
        }
    }
    return res;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;å……åˆ†æŒ–æ˜åº”ç”¨åœºæ™¯ï¼Œè¿™æ ·æ‰èƒ½è®¾è®¡å‡ºè‰¯å¥½çš„rowkey&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨æ˜ å°„è¡¨ï¼Œå…¶å®ä¹Ÿæ˜¯å˜ç›¸çš„æŠŠéœ€è¦æ£€ç´¢çš„åˆ—ç§»åˆ°äº†rowkeyä¸­ï¼Œåªä¸è¿‡æ˜¯æ˜ å°„è¡¨çš„rowkeyï¼Œè¿™æ ·å¯ä»¥ä¸å½±å“åŸå§‹HTableçš„rowkey&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>ã€ŠYouthã€‹</title>
      <link>http://vonzhou.com/2019/youth/</link>
      <pubDate>Mon, 01 Apr 2019 00:00:00 +0000</pubDate>
      
      <guid>http://vonzhou.com/2019/youth/</guid>
      <description>

&lt;p&gt;æ— æ„é—´çœ‹åˆ°ã€ŠYouthã€‹è¿™é¦–è¯—ï¼Œç¬é—´æƒ³åˆ°å…­ï¼Œä¸ƒå¹´å‰æœ‰æ®µæ—¶é—´é‚£ä¸ªåœ¨é»„å®¶æ¹–ç•”æ¯å¤©å­¦ä¹ è‹±æ–‡çš„å°‘å¹´ï¼Œå…¶ä¸­å°±æœ‰èƒŒè¯µè¿™é¦–è¯—ã€‚&lt;/p&gt;

&lt;h2 id=&#34;åŸæ–‡&#34;&gt;åŸæ–‡&lt;/h2&gt;

&lt;p&gt;Youth is not a time of lifeâ€”it is a state of mind.&lt;/p&gt;

&lt;p&gt;It is not a matter of red cheeks, red lips and supple knees.&lt;/p&gt;

&lt;p&gt;It is a temper of the will; a quality of the imagination; a vigor(ç²¾åŠ›) of the emotions.&lt;/p&gt;

&lt;p&gt;it is a freshness of the deep springs of life.&lt;/p&gt;

&lt;p&gt;Youth means a temperamental predominance of courage over timidity,&lt;/p&gt;

&lt;p&gt;of the appetite for adventure over a life of ease.&lt;/p&gt;

&lt;p&gt;This often exists in a man of fifty, more than in a boy of twenty.&lt;/p&gt;

&lt;p&gt;Nobody grows old by merely living a number of years;&lt;/p&gt;

&lt;p&gt;people grow old by deserting their ideals.&lt;/p&gt;

&lt;p&gt;Years may wrinkle the skin, but to give up enthusiasm wrinkles the soul.&lt;/p&gt;

&lt;p&gt;Worry, doubt, self-distrust, fear and despairâ€”&lt;/p&gt;

&lt;p&gt;these are the long, long years that bow the head  and turn the growing spirit back to dust.&lt;/p&gt;

&lt;p&gt;Whether seventy or sixteen, there is in every beingâ€™s heart a love of wonder;&lt;/p&gt;

&lt;p&gt;the sweet amazement at the stars and starlike things and thoughts;&lt;/p&gt;

&lt;p&gt;the undaunted challenge of events,&lt;/p&gt;

&lt;p&gt;the unfailing childlike appetite for what comes next,&lt;/p&gt;

&lt;p&gt;and the joy in the game of life.&lt;/p&gt;

&lt;p&gt;You are as young as your faith, as old as your doubt;&lt;/p&gt;

&lt;p&gt;as young as your self-confidence, as old as your fear,&lt;/p&gt;

&lt;p&gt;as young as your hope, as old as your despair.&lt;/p&gt;

&lt;p&gt;In the central place of your heart there is a wireless station.&lt;/p&gt;

&lt;p&gt;So long as it receives messages of beauty, hope, cheer, grandeur, courage,&lt;/p&gt;

&lt;p&gt;and power from the earth, from men and from the Infiniteâ€”so long are you young.&lt;/p&gt;

&lt;p&gt;When the wires are all down and the central places of your heart are covered with the&lt;/p&gt;

&lt;p&gt;snows of pessimism and the ice of cynicism,&lt;/p&gt;

&lt;p&gt;then are you grown old, indeed!
                                                                               â€“Samuel  Ullman&lt;/p&gt;

&lt;h2 id=&#34;ä¸­æ–‡&#34;&gt;ä¸­æ–‡&lt;/h2&gt;

&lt;p&gt;é’æ˜¥ä¸æ˜¯å¹´åï¼Œè€Œæ˜¯å¿ƒå¢ƒï¼›&lt;/p&gt;

&lt;p&gt;é’æ˜¥ä¸æ˜¯æ¡ƒé¢ã€ä¸¹å”‡ã€æŸ”è†ï¼Œ&lt;/p&gt;

&lt;p&gt;è€Œæ˜¯æ·±æ²‰çš„æ„å¿—ï¼Œæ¢å®çš„æƒ³è±¡ï¼Œç‚™çƒ­çš„æ„Ÿæƒ…ï¼›&lt;/p&gt;

&lt;p&gt;é’æ˜¥æ˜¯ç”Ÿå‘½çš„æ·±æ³‰åœ¨æ¶Œæµã€‚&lt;/p&gt;

&lt;p&gt;é’æ˜¥æ°”è´¯é•¿è™¹ï¼Œå‹‡é”ç›–è¿‡æ€¯å¼±ï¼Œè¿›å–å‹å€’è‹Ÿå®‰ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æ­¤é”æ°”ï¼ŒäºŒååç”Ÿè€Œæœ‰ä¹‹ï¼Œå…­æ—¬ç”·å­åˆ™æ›´å¤šè§ã€‚&lt;/p&gt;

&lt;p&gt;å¹´å²æœ‰åŠ ï¼Œå¹¶éå‚è€ï¼Œç†æƒ³ä¸¢å¼ƒï¼Œæ–¹å •æš®å¹´ã€‚&lt;/p&gt;

&lt;p&gt;å²æœˆæ‚ æ‚ ï¼Œè¡°å¾®åªåŠè‚Œè‚¤ï¼›çƒ­å¿±æŠ›å´ï¼Œé¢“åºŸå¿…è‡´çµé­‚ã€‚&lt;/p&gt;

&lt;p&gt;å¿§çƒ¦ï¼Œæƒ¶æï¼Œä¸§å¤±è‡ªä¿¡ï¼Œå®šä½¿å¿ƒçµæ‰­æ›²ï¼Œæ„æ°”å¦‚ç°ã€‚&lt;/p&gt;

&lt;p&gt;æ— è®ºå¹´å±ŠèŠ±ç”²ï¼ŒæŠ‘æˆ–äºŒå…«èŠ³é¾„ï¼Œå¿ƒä¸­çš†æœ‰ç”Ÿå‘½ä¹‹æ¬¢ä¹ï¼Œå¥‡è¿¹ä¹‹è¯±æƒ‘ï¼Œå­©ç«¥èˆ¬å¤©çœŸä¹…ç››ä¸è¡°ã€‚&lt;/p&gt;

&lt;p&gt;äººäººå¿ƒä¸­çš†æœ‰ä¸€å°å¤©çº¿ï¼Œåªè¦ä½ ä»å¤©ä¸Šäººé—´æ¥å—ç¾å¥½ã€å¸Œæœ›ã€æ¬¢ä¹ã€å‹‡æ°”å’ŒåŠ›é‡çš„ä¿¡å·ï¼Œä½ å°±é’æ˜¥æ°¸é©»ï¼Œé£åå¸¸å­˜ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€æ—¦å¤©çº¿ä¸‹é™ï¼Œé”æ°”ä¾¿è¢«å†°é›ªè¦†ç›–ï¼Œç©ä¸–ä¸æ­ã€è‡ªæš´è‡ªå¼ƒæ²¹ç„¶è€Œç”Ÿï¼Œå³ä½¿å¹´æ–¹äºŒåï¼Œå®å·²å‚å‚è€çŸ£ï¼›&lt;/p&gt;

&lt;p&gt;ç„¶åˆ™åªè¦æ ‘èµ·å¤©çº¿ï¼Œæ•æ‰ä¹è§‚ä¿¡å·ï¼Œä½ å°±æœ‰æœ›åœ¨å…«åé«˜é¾„å‘Šåˆ«å°˜å¯°æ—¶ä»è§‰å¹´è½»ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>JDK 12æ–°ç‰¹æ€§ï¼šSwitchè¡¨è¾¾å¼</title>
      <link>http://vonzhou.com/2019/java12-switch-expression/</link>
      <pubDate>Wed, 20 Mar 2019 00:00:00 +0000</pubDate>
      
      <guid>http://vonzhou.com/2019/java12-switch-expression/</guid>
      <description>

&lt;p&gt;JDK 12 GAåœ¨2019.3.19å‘å¸ƒï¼Œå…¶ä¸­ä¸€é¡¹æ–°ç‰¹æ€§æ˜¯JEP 325ï¼šSwitchè¡¨è¾¾å¼ï¼ˆSwitch Expressionsï¼‰ã€‚å­¦ä¹ ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœçŸ¥é“Scalaä¸­çš„æ¨¡å¼åŒ¹é…ï¼Œå°±å¾ˆå®¹æ˜“ç†è§£Switchè¡¨è¾¾å¼ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡å®Œæ•´ä»£ç è§&lt;a href=&#34;https://github.com/vonzhou/learning-java12/blob/master/src/main/java/com/vonzhou/learningjava12/SwitchDemo.java&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;SwitchDemo &lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ä¼ ç»Ÿçš„switchè¯­å¥&#34;&gt;ä¼ ç»Ÿçš„Switchè¯­å¥&lt;/h2&gt;

&lt;p&gt;ä¼ ç»Ÿçš„Switchè¯­å¥ï¼ˆswitch statementï¼‰æˆ‘ä»¬å¹¶ä¸é™Œç”Ÿï¼Œåœ¨æ¯ä¸ªcaseåˆ†æ”¯ä¸­å®ç°å¯¹åº”çš„å¤„ç†é€»è¾‘ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;private static void switchStatement(WeekDay day) {
    int numLetters = 0;
    switch (day) {
        case MONDAY:
        case FRIDAY:
        case SUNDAY:
            numLetters = 6;
            break;
        case TUESDAY:
            numLetters = 7;
            break;
        case THURSDAY:
        case SATURDAY:
            numLetters = 8;
            break;
        case WEDNESDAY:
            numLetters = 9;
            break;
    }
    System.out.println(&amp;quot;1. Num Of Letters: &amp;quot; + numLetters);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Switchè¯­å¥çš„ç‰¹ç‚¹æ˜¯æ¯ä¸ªcaseåˆ†æ”¯å—æ˜¯æ²¡æœ‰è¿”å›å€¼çš„ï¼Œè€Œè¡¨è¾¾å¼ï¼ˆexpressionï¼‰çš„ç‰¹ç‚¹æ˜¯æœ‰è¿”å›å€¼ã€‚&lt;/p&gt;

&lt;h2 id=&#34;switchè¡¨è¾¾å¼&#34;&gt;Switchè¡¨è¾¾å¼&lt;/h2&gt;

&lt;h3 id=&#34;æ¨¡å¼åŒ¹é…-patrern-matching&#34;&gt;æ¨¡å¼åŒ¹é…ï¼ˆPatrern Matchingï¼‰&lt;/h3&gt;

&lt;p&gt;ä¸Šè¿°â€œè®¡ç®—å­—ç¬¦ä¸ªæ•°â€çš„ä¾‹å­ä½¿ç”¨Switchè¡¨è¾¾å¼ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;private static void switchExpression(WeekDay day) {
    int numLetters = switch (day) {
        case MONDAY, FRIDAY, SUNDAY -&amp;gt; 6;
        case TUESDAY -&amp;gt; 7;
        case THURSDAY, SATURDAY -&amp;gt; 8;
        case WEDNESDAY -&amp;gt; 9;
    };

    System.out.println(&amp;quot;2. Num Of Letters: &amp;quot; + numLetters);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Switchè¡¨è¾¾å¼ç›®å‰å±äºé¢„è§ˆï¼ˆPreviewï¼‰åŠŸèƒ½ï¼Œæ‰€ä»¥åœ¨ç¼–è¯‘è¿è¡Œçš„æ—¶å€™éœ€è¦é€šè¿‡&lt;code&gt;--enable-preview&lt;/code&gt;é€‰é¡¹è®¾ç½®æ¥å¼€å¯ï¼Œå…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;D:\GitHub\learning-java12\src\main\java
Î» D:\dev\jdk-12\bin\javac.exe --enable-preview --release 12 com\vonzhou\learningjava12\SwitchDemo.java
æ³¨: com\vonzhou\learningjava12\SwitchDemo.java ä½¿ç”¨é¢„è§ˆè¯­è¨€åŠŸèƒ½ã€‚
æ³¨: æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·ä½¿ç”¨ -Xlint:preview é‡æ–°ç¼–è¯‘ã€‚

D:\GitHub\learning-java12\src\main\java
Î» D:\dev\jdk-12\bin\java.exe --enable-preview com.vonzhou.learningjava12.SwitchDemo
1. Num Of Letters: 6
2. Num Of Letters: 9
3. Num Of Letters: 8
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;break-å¯ä»¥è¿”å›å€¼&#34;&gt;break å¯ä»¥è¿”å›å€¼&lt;/h3&gt;

&lt;p&gt;Switchè¡¨è¾¾å¼ä¸­ä¹Ÿæ”¯æŒbreakæœ‰è¿”å›å€¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;private static void switchExpressionBreakReturn(WeekDay day) {
    int numLetters = switch (day) {
        case MONDAY:
        case FRIDAY:
        case SUNDAY:
            break 6;
        case TUESDAY:
            break 7;
        case THURSDAY:
        case SATURDAY:
            numLetters = 8;
            break 8;
        case WEDNESDAY:
            break 9;
    };

    System.out.println(&amp;quot;3. Num Of Letters: &amp;quot; + numLetters);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;scalaä¸­çš„æ¨¡å¼åŒ¹é…&#34;&gt;Scalaä¸­çš„æ¨¡å¼åŒ¹é…&lt;/h2&gt;

&lt;p&gt;Scalaä¸­å®ç°æ¨¡å¼åŒ¹é…çš„è¯­æ³•æ˜¯Matchè¡¨è¾¾å¼ï¼Œå…¶å®å¯ä»¥çœ‹åšæ˜¯Javaä¸­çš„Switchè¡¨è¾¾å¼ã€‚ä¾‹å¦‚åˆ¤æ–­ä¸€ä¸ªåˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å¦æ˜¯0ï¼Œå¯ä»¥å®ç°ä¸ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Scala&#34;&gt;def startsWithZero(expr: List[Int]) =
expr match {
  case List(0, _*) =&amp;gt; println(&amp;quot;found it&amp;quot;)
  case _ =&amp;gt;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;Switchè¡¨è¾¾å¼å¯ä»¥ä½¿å¾—å†™å‡ºçš„ä»£ç æ›´åŠ ç®€æ´å®‰å…¨ï¼ˆmore concisely and safelyï¼‰ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://openjdk.java.net/jeps/325&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;JEP 325: Switch Expressions (Preview)&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>å…³äºæˆ‘</title>
      <link>http://vonzhou.com/about/</link>
      <pubDate>Mon, 18 Mar 2019 10:23:42 +0800</pubDate>
      
      <guid>http://vonzhou.com/about/</guid>
      <description>&lt;ul&gt;
&lt;li&gt;2013~2016 æ­¦æ±‰ï¼Œç ”ç©¶ç”Ÿ&lt;/li&gt;
&lt;li&gt;2009~2013 æ­¦æ±‰ï¼Œå¤§å­¦&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>æˆ‘çš„è¯»ä¹¦å†ç¨‹</title>
      <link>http://vonzhou.com/readings/</link>
      <pubDate>Mon, 18 Mar 2019 10:23:42 +0800</pubDate>
      
      <guid>http://vonzhou.com/readings/</guid>
      <description>

&lt;h2 id=&#34;computer-science-è®¡ç®—æœºç§‘å­¦&#34;&gt;Computer Science è®¡ç®—æœºç§‘å­¦&lt;/h2&gt;

&lt;h3 id=&#34;basics-é€šè¯†-åŸºç¡€-ç»å…¸&#34;&gt;Basics é€šè¯†/åŸºç¡€/ç»å…¸&lt;/h3&gt;

&lt;ul class=&#34;task-list&#34;&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; disabled class=&#34;task-list-item&#34;&gt; ã€ŠA Philosophy of Software Designã€‹ &lt;a href=&#34;https://www.youtube.com/watch?v=bmSAYlu0NcY&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;è§†é¢‘&lt;/a&gt;&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šç¨‹åºå‘˜ä¿®ç‚¼ä¹‹é“ ä»å°å·¥åˆ°ä¸“å®¶ã€‹  2017.11.14    ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; disabled class=&#34;task-list-item&#34;&gt; ã€Šä»£ç å¤§å…¨ã€‹&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ ç¬¬2ç‰ˆã€‹| &lt;a href=&#34;https://github.com/vonzhou/CSAPP&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;ä»£ç &lt;/a&gt; ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠTCP/IPè¯¦è§£å·1ï¼šåè®®ã€‹&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šé‡æ„ æ”¹å–„æ—¢æœ‰ä»£ç çš„è®¾è®¡ã€‹&lt;/label&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;linux-unix&#34;&gt;Linux/Unix&lt;/h3&gt;

&lt;ul class=&#34;task-list&#34;&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; disabled class=&#34;task-list-item&#34;&gt; ã€Šæ€§èƒ½ä¹‹å·…:æ´æ‚‰ç³»ç»Ÿã€ä¼ä¸šä¸äº‘è®¡ç®—ã€‹&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠUnixç¯å¢ƒé«˜çº§ç¼–ç¨‹ã€‹APUE ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠUnixç½‘ç»œç¼–ç¨‹å·1ï¼šå¥—æ¥å­—è”ç½‘APIã€‹ ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠUnixç½‘ç»œç¼–ç¨‹å·2ï¼šè¿›ç¨‹é—´é€šä¿¡ã€‹ ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šæ·±å…¥ç†è§£Linuxå†…æ ¸ã€‹ ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠLinuxå†…æ ¸è®¾è®¡ä¸å®ç° ç¬¬3ç‰ˆã€‹&lt;/label&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;java&#34;&gt;Java&lt;/h3&gt;

&lt;ul class=&#34;task-list&#34;&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠRocketMQå®æˆ˜ä¸åŸç†è§£æã€‹2019.1.27&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šåˆ†å¸ƒå¼Javaåº”ç”¨ : åŸºç¡€ä¸å®è·µã€‹2019.1.25&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šå®æˆ˜Javaé«˜å¹¶å‘ç¨‹åºè®¾è®¡ã€‹| &lt;a href=&#34;https://github.com/vonzhou/learning-java/tree/master/src/PracticeJavaHighConcurrency&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;ä»£ç &lt;/a&gt;   2018.11.6 ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šæ·±å…¥å‰–æTomcatã€‹ 2018.10.28 ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠMyBatisæŠ€æœ¯å†…å¹•ã€‹ 2018.10.20 ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠHotSpotå®æˆ˜ã€‹ 2018.3.14 ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠJavaå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹| &lt;a href=&#34;https://github.com/vonzhou/JavaConcurrencyInPractice&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;ä»£ç &lt;/a&gt;  2018.2.25  ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºï¼ˆç¬¬2ç‰ˆï¼‰ã€‹| &lt;a href=&#34;https://github.com/vonzhou/learning-java/tree/master/src/jvm&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;ä»£ç &lt;/a&gt;  ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šå¤§å‹ç½‘ç«™ç³»ç»Ÿä¸Javaä¸­é—´ä»¶å®è·µã€‹  2018.5.22&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠJava 8å®æˆ˜ã€‹| &lt;a href=&#34;https://github.com/vonzhou/Java8InAction&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;ä»£ç &lt;/a&gt; 2017.11.7&lt;/label&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;scala&#34;&gt;Scala&lt;/h3&gt;

&lt;ul class=&#34;task-list&#34;&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; disabled class=&#34;task-list-item&#34;&gt; ã€ŠScalaç¼–ç¨‹ï¼ˆç¬¬3ç‰ˆï¼‰ã€‹     ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šå¿«å­¦Scalaã€‹&lt;/label&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;golang&#34;&gt;Golang&lt;/h3&gt;

&lt;ul class=&#34;task-list&#34;&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠGoè¯­è¨€å®æˆ˜ã€‹ 2018.7.5&lt;/label&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;bigdata-å¤§æ•°æ®&#34;&gt;BigData å¤§æ•°æ®&lt;/h3&gt;

&lt;ul class=&#34;task-list&#34;&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠSparkå¿«é€Ÿå¤§æ•°æ®åˆ†æã€‹ 2019.3.13&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠHBaseæƒå¨æŒ‡å—ã€‹ 2018.12.20&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠHBaseä¸ç¡è§‰ä¹¦ã€‹2018.11.3&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠStormåˆ†å¸ƒå¼å®æ—¶è®¡ç®—æ¨¡å¼ã€‹ 2018.10.13&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠHadoop: The Definitive Guide : 4th Editionã€‹ 2018.10.7  ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠKafkaæƒå¨æŒ‡å—ã€‹ 2018.6.15 ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;database-æ•°æ®åº“&#34;&gt;Database æ•°æ®åº“&lt;/h3&gt;

&lt;ul class=&#34;task-list&#34;&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; disabled class=&#34;task-list-item&#34;&gt; ã€Šé«˜æ€§èƒ½MySQLã€‹ ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠMySQLæŠ€æœ¯å†…å¹• InnoDBå­˜å‚¨å¼•æ“ã€‹ ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠRedisè®¾è®¡ä¸å®ç°ã€‹&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠRediså¼€å‘ä¸è¿ç»´ã€‹  2017.11.12&lt;/label&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;architecture-æ¶æ„&#34;&gt;Architecture æ¶æ„&lt;/h3&gt;

&lt;ul class=&#34;task-list&#34;&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; disabled class=&#34;task-list-item&#34;&gt; ã€Šç³»ç»Ÿæ¶æ„:å¤æ‚ç³»ç»Ÿçš„äº§å“è®¾è®¡ä¸å¼€å‘ã€‹&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; disabled class=&#34;task-list-item&#34;&gt; ã€Šå¤§å‹ç½‘ç«™æŠ€æœ¯æ¶æ„ï¼šæ ¸å¿ƒåŸç†ä¸æ¡ˆä¾‹åˆ†æã€‹&lt;br /&gt;&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠClean Architectureã€‹ 2019.1.8 ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠDesigning Data-Intensive Applicationsã€‹ 2018.1.30 ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šå¤§å‹ç½‘ç«™æŠ€æœ¯æ¶æ„æ¼”è¿›ä¸æ€§èƒ½ä¼˜åŒ–ã€‹ 2018.10.10&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šå¤§å‹åˆ†å¸ƒå¼ç½‘ç«™æ¶æ„è®¾è®¡ä¸å®è·µã€‹ 2017.2.21&lt;/label&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;entrepreneurship-åˆ›ä¸š-ç®¡ç†&#34;&gt;Entrepreneurship åˆ›ä¸š/ç®¡ç†&lt;/h2&gt;

&lt;ul class=&#34;task-list&#34;&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šé‡æ¥ Reworkã€‹&lt;/label&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;history-å†å²&#34;&gt;History å†å²&lt;/h2&gt;

&lt;ul class=&#34;task-list&#34;&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šä¸­å›½å†ä»£æ”¿æ²»å¾—å¤±ã€‹ 2019.2.23  ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; disabled class=&#34;task-list-item&#34;&gt; ã€Šå·¨æµæ²³ å°ç‰ˆã€‹&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šç´«ç¦åŸçš„é»„æ˜ã€‹&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šä¸‡å†åäº”å¹´ã€‹   2017.11.12  ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šæ˜æœé‚£äº›äº‹å„¿ã€‹&lt;/label&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;literature-æ–‡å­¦&#34;&gt;Literature æ–‡å­¦&lt;/h2&gt;

&lt;ul class=&#34;task-list&#34;&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ç‹å°æ³¢ã€Šæ²‰é»˜çš„å¤§å¤šæ•°ã€‹    2019.3.11   ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šæ´»ç€ä¸ºäº†è®²è¿°ã€‹  2017.4.10   ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šç™¾å¹´å­¤ç‹¬ã€‹   2018.2.18  ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šç›¸çº¦æ˜ŸæœŸäºŒã€‹&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šè§£å¿§æ‚è´§åº—ã€‹&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šæ´»ç€ã€‹   ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šå›´åŸã€‹  ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šå·¨äººçš„é™¨è½ã€‹  2017.3.10&lt;/label&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;biography-ä¼ è®°&#34;&gt;Biography ä¼ è®°&lt;/h2&gt;

&lt;ul class=&#34;task-list&#34;&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€ŠDOOMå¯ä¸–å½•ã€‹ 2017.12.4&lt;/label&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;thinking-æ€ç»´&#34;&gt;Thinking æ€ç»´&lt;/h2&gt;

&lt;ul class=&#34;task-list&#34;&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šå¦‚ä½•é˜…è¯»ä¸€æœ¬ä¹¦ã€‹ ğŸ‘&lt;/label&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;finance-é‡‘è&#34;&gt;Finance é‡‘è&lt;/h2&gt;

&lt;ul class=&#34;task-list&#34;&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; checked disabled class=&#34;task-list-item&#34;&gt; ã€Šä¸–ç•Œä¸Šæœ€ç®€å•çš„ä¼šè®¡ä¹¦ã€‹  2019.3.20&lt;br /&gt;&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; disabled class=&#34;task-list-item&#34;&gt; å‘¨å¤é£ã€Šå…¬å¸ç†è´¢ã€‹&lt;/label&gt;&lt;/li&gt;
&lt;li&gt;&lt;label&gt;&lt;input type=&#34;checkbox&#34; disabled class=&#34;task-list-item&#34;&gt; å”æœã€Šæ‰‹æŠŠæ‰‹æ•™ä½ è¯»è´¢æŠ¥2ã€‹&lt;/label&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>æ³¢å…°æ¥å®¢</title>
      <link>http://vonzhou.com/2019/bo-lan-lai-ke/</link>
      <pubDate>Fri, 15 Mar 2019 11:03:31 +0800</pubDate>
      
      <guid>http://vonzhou.com/2019/bo-lan-lai-ke/</guid>
      <description>&lt;p&gt;å¾ˆå–œæ¬¢è¿™é¦–è¯—ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;æ³¢å…°æ¥å®¢ 
         â€”åŒ—å²›
é‚£æ—¶æˆ‘ä»¬æœ‰æ¢¦ï¼Œ 
å…³äºæ–‡å­¦ï¼Œ 
å…³äºçˆ±æƒ…ï¼Œ 
å…³äºç©¿è¶Šä¸–ç•Œçš„æ—…è¡Œã€‚ 
å¦‚ä»Šæˆ‘ä»¬æ·±å¤œé¥®é…’ï¼Œ 
æ¯å­ç¢°åˆ°ä¸€èµ·ï¼Œ 
éƒ½æ˜¯æ¢¦ç ´ç¢çš„å£°éŸ³ã€‚
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>HBase å®ç°åˆ†é¡µæŸ¥è¯¢</title>
      <link>http://vonzhou.com/2019/hbase-page/</link>
      <pubDate>Thu, 14 Mar 2019 00:00:00 +0000</pubDate>
      
      <guid>http://vonzhou.com/2019/hbase-page/</guid>
      <description>

&lt;h2 id=&#34;åº&#34;&gt;åº&lt;/h2&gt;

&lt;p&gt;æŒ‰æ—¶é—´åŒºé—´åˆ†é¡µå¯¼å‡ºHBaseä¸­çš„æ•°æ®ã€‚&lt;/p&gt;

&lt;h2 id=&#34;rowkeyçš„è®¾è®¡&#34;&gt;Rowkeyçš„è®¾è®¡&lt;/h2&gt;

&lt;p&gt;åœ¨ä½¿ç”¨HBaseæ—¶ï¼ŒRowkeyçš„è®¾è®¡å¾ˆé‡è¦ï¼Œå–å†³äºä¸šåŠ¡ã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚è¦æŠŠç”¨æˆ·å…³è”çš„æ•°æ®å­˜å…¥HBaseï¼Œåç»­æ ¹æ®æ—¶é—´æŸ¥è¯¢ï¼Œå¯ä»¥è¿™æ ·è®¾è®¡rowkeyï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;userId + (Long.MAX - timestamp) + uid 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·èƒ½æ»¡è¶³ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å¯ä»¥æ ¹æ®userIdçš„ç‰¹ç‚¹é¢„åˆ†åŒº&lt;/li&gt;
&lt;li&gt;æ—¶é—´æˆ³é€†è½¬ï¼Œå¯ä»¥ä¿è¯æœ€è¿‘çš„æ•°æ®rowkeyæ’åºé å‰&lt;/li&gt;
&lt;li&gt;åˆ†å¸ƒå¼ç¯å¢ƒä¸‹æ—¶é—´æˆ³å¯èƒ½ä¸€æ ·ï¼Œæ‰€ä»¥è¿½åŠ ä¸€ä¸ªUIDï¼Œé˜²æ­¢é‡å¤&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç¤ºä¾‹ä»£ç ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;private String getRowKeyStr(String userId, long ts, long uid) {
    return String.format(&amp;quot;%s%013d%019d&amp;quot;, userId, Long.MAX_VALUE - ts, uid);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;æ„é€ tableå®ä¾‹&#34;&gt;æ„é€ Tableå®ä¾‹&lt;/h2&gt;

&lt;p&gt;éœ€è¦è‡ªå·±ä¿è¯Tableçš„çº¿ç¨‹å®‰å…¨æ€§ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public Table getTable() throws Exception {
    Table table = tableThreadLocal.get();
    if (table == null) {
        table = getTableInternal();
        if (table != null) {
            tableThreadLocal.set(table);
        }
    }
    return table;
}

public Table getTableInternal() throws Exception {
    Configuration config = HBaseConfiguration.create();
    config.set(HConstants.ZOOKEEPER_QUORUM, hBaseConfig.getZkQuorum());
    config.set(HConstants.ZOOKEEPER_CLIENT_PORT, hBaseConfig.getZkClientPort());
    config.set(HConstants.ZOOKEEPER_ZNODE_PARENT, hBaseConfig.getZkZnodeParent());
    config.setInt(&amp;quot;hbase.rpc.timeout&amp;quot;, 20000);
    config.setInt(&amp;quot;hbase.client.operation.timeout&amp;quot;, 30000);
    config.setInt(&amp;quot;hbase.client.scanner.timeout.period&amp;quot;, 20000);
    config.setInt(&amp;quot;hbase.client.pause&amp;quot;, 50);
    config.setInt(&amp;quot;hbase.client.retries.number&amp;quot;, 15);
//        HBaseAdmin.checkHBaseAvailable(config);

    Connection connection = ConnectionFactory.createConnection(config);
    Table table = connection.getTable(TableName.valueOf(hBaseConfig.getTableName()));

    return table;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;åˆ†é¡µæŸ¥è¯¢&#34;&gt;åˆ†é¡µæŸ¥è¯¢&lt;/h2&gt;

&lt;p&gt;è¿™é‡Œè¦æ³¨æ„æ˜¯Scanä¸­çš„startRowï¼ŒstopRowæ˜¯å·¦é—­å³å¼€åŒºé—´ï¼Œæ‰€ä»¥ä¸ºäº†é¿å…ä¸‹ä¸€é¡µä¸­åŒ…å«ä¸Šä¸€é¡µçš„æœ€åä¸€æ¡æ•°æ®ï¼Œ ä¸‹ä¸€é¡µScançš„æ—¶å€™startRowè¿½åŠ äº†ä¸€ä¸ª0å­—èŠ‚ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Filter filter = new PageFilter(15);

byte[] lastRow = null;
byte[] startRow = getRowKey(userId, end, 0L);
byte[] endRow = getRowKey(userId, start, Long.MAX_VALUE);

Table table = getTable();
if (table == null) {
    return;
}

int sum = 0;

while (true) {
    Scan scan = new Scan();
    scan.setFilter(filter);

    byte[] sr = null;
    if (lastRow != null) {
        sr = Bytes.add(lastRow, new byte[1]);// é‡ç‚¹1
    } else {
        sr = startRow;
    }
    scan.setStartRow(sr);
    scan.setStopRow(endRow);
    ResultScanner scanner = table.getScanner(scan);
    Result result = null;
    int cnt = 0;
    while ((result = scanner.next()) != null) {
        // ä»Resultä¸­è§£ææ•°æ®ï¼Œè¿›è¡Œå¤„ç†
        cnt++;
        lastRow = result.getRow();
    }
    scanner.close();
    if (cnt == 0) {
        break;
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;filter&#34;&gt;Filter&lt;/h2&gt;

&lt;p&gt;ä¸Šè¿°åªæ˜¯ç”¨äº†PageFilterå®ç°åˆ†é¡µï¼Œå¦‚æœéœ€è¦æ ¹æ®åˆ—çš„å„ç§æ¡ä»¶è¿›è¡ŒæŸ¥è¯¢ï¼Œå°±éœ€è¦ç”¨åˆ°FilterListï¼Œæˆ–è€…è‡ªå·±å®ç°Filterã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>è®°ä¸€æ¬¡ä½¿ç”¨KafkaProducerå¼•å‘çš„Full GCé—®é¢˜</title>
      <link>http://vonzhou.com/2019/kafka-producer-fullgc-story/</link>
      <pubDate>Fri, 01 Mar 2019 00:00:00 +0000</pubDate>
      
      <guid>http://vonzhou.com/2019/kafka-producer-fullgc-story/</guid>
      <description>

&lt;h2 id=&#34;åœºæ™¯&#34;&gt;åœºæ™¯&lt;/h2&gt;

&lt;p&gt;ä¸€ä¸ªæ¨¡å—æ¥æ”¶æ•°æ®ï¼Œç„¶åæŠ•åˆ°Kafkaä¸­ï¼Œå®ç°å‰Šå³°å¡«è°·ã€‚çªç„¶æœ‰ä¸€å¤©é¢‘ç¹å‡ºç°Full GCé—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://vonzhou.com/images/kafka-producer-fullgc-story-1.gif&#34; alt=&#34;FullGCæƒ…å†µ&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;åˆæ­¥å°è¯•&#34;&gt;åˆæ­¥å°è¯•&lt;/h2&gt;

&lt;p&gt;æŸ¥çœ‹JVMçš„é…ç½®ï¼Œå‘ç°æœ€å¤§å †é…ç½®çš„å¤ªå°ï¼Œæ¨æµ‹ï¼šå †å†…å­˜ä¸è¶³ï¼Œå¯¼è‡´é¢‘ç¹gcï¼Œå†…å­˜ä¸è¶³ï¼Œå¯¼è‡´å¾€kafkaå‘é€æ¶ˆæ¯çš„æ—¶å€™é˜»å¡ï¼Œæ‰€ä»¥çº¿ç¨‹éƒ½ä¼šå¡ä½ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;15302 com.xxxx.AppRunner -Dlog.dir=/path/to/logs -Xms1024m -Xmx1024m -XX:MaxPermSize=256m -verbose:gc -XX:+PrintGCDetails
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è°ƒæ•´å †å¤§å°é…ç½®åï¼ŒFull GC é—®é¢˜å¹¶æ²¡æœ‰å¾—åˆ°ç¼“è§£ã€‚&lt;/p&gt;

&lt;h2 id=&#34;matåˆ†æ&#34;&gt;MATåˆ†æ&lt;/h2&gt;

&lt;p&gt;heap dumpå‡ºç°ä½¿ç”¨MATåˆ†æã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://vonzhou.com/images/kafka-producer-fullgc-story-2.png&#34; alt=&#34;MATåˆ†æ&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™é‡Œçš„å¤§å¯¹è±¡éƒ½æ˜¯æˆ‘ä»¬å‘é€çš„æ‰¹é‡æ¶ˆæ¯å¯¹è±¡ï¼Œæ¨æµ‹ï¼šæ˜¯ä¸æ˜¯&lt;code&gt;batch.size&lt;/code&gt;è®¾ç½®çš„è¿‡å¤§ï¼Ÿï¼ˆè®¾ç½®çš„æ˜¯40MBï¼‰&lt;/p&gt;

&lt;h2 id=&#34;è§£å†³æ–¹æ³•&#34;&gt;è§£å†³æ–¹æ³•&lt;/h2&gt;

&lt;p&gt;è°ƒå°&lt;code&gt;batch.size&lt;/code&gt;ï¼Œè®¾ç½®ä¸º20MBï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;props.put(&amp;quot;buffer.memory&amp;quot;, 100 * 1024 * 1024);
// æ‰¹é‡å‘é€çš„å­—èŠ‚å¤§å°ï¼Œ 20MB
props.put(&amp;quot;batch.size&amp;quot;, 2 * 10 * 1024 * 1024);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ€ç»ˆé—®é¢˜å¾—ä»¥è§£å†³ï¼Œè¿Minor GCä¹Ÿå¾ˆå°‘äº†ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://vonzhou.com/images/kafka-producer-fullgc-story-3.png&#34; alt=&#34;GCè¶‹åŠ¿å›¾&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;kafkaproduceræ¶ˆæ¯å‘é€è¿‡ç¨‹&#34;&gt;KafkaProduceræ¶ˆæ¯å‘é€è¿‡ç¨‹&lt;/h2&gt;

&lt;p&gt;KafkaProducerå‘é€æ¶ˆæ¯çš„è¿‡ç¨‹æ˜¯ï¼šæ¶ˆæ¯è¿½åŠ åˆ°ä¸€ä¸ªå†…éƒ¨çš„é˜Ÿåˆ—ä¸­ï¼Œæœ‰ä¸€ä¸ªå¼‚æ­¥çº¿ç¨‹è´Ÿè´£ä»ä¸­å–å‡ºï¼Œå°†æ¶ˆæ¯å‘é€ç»™Brokerã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://vonzhou.com/images/kafka-producer-fullgc-story-4.jpg&#34; alt=&#34;Producerå‘é€æ¶ˆæ¯æµç¨‹&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨äº†è§£kafkaæ¶ˆæ¯å‘é€è¿‡ç¨‹çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡MATå¤§å¯¹è±¡å›¾è¿˜å¯ä»¥çœ‹åˆ°ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;buffer.memory&lt;/code&gt;é…ç½®çš„æ˜¯å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯æ—¶&lt;code&gt;BufferPool&lt;/code&gt;çš„å†…å­˜å¤§å°ï¼Œè‡³å°‘è¦æ¯”&lt;code&gt;batch.size&lt;/code&gt;å¤§ï¼Œå¦åˆ™è¿ä¸€ä¸ª&lt;code&gt;RecordBatch&lt;/code&gt;ä¹Ÿæ”¾ä¸è¿›å»ã€‚&lt;/li&gt;
&lt;li&gt;å®é™…å ç”¨çš„å†…å­˜å¯èƒ½æ˜¯&lt;code&gt;buffer.memory&lt;/code&gt;çš„å¥½å‡ å€ï¼ˆ4~5å€ï¼Ÿï¼‰ï¼Œæµè½¬å¤šä¸ªç¯èŠ‚ï¼Œåº•å±‚å­˜å‚¨éƒ½æ˜¯&lt;code&gt;ByteBuffer&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>BeanUtils.copyProperties æºç åˆ†æ</title>
      <link>http://vonzhou.com/2019/spring-beanutils-copyproperties/</link>
      <pubDate>Wed, 27 Feb 2019 00:00:00 +0000</pubDate>
      
      <guid>http://vonzhou.com/2019/spring-beanutils-copyproperties/</guid>
      <description>

&lt;h2 id=&#34;æ¦‚è¿°&#34;&gt;æ¦‚è¿°&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;åˆ©ç”¨åå°„&lt;/li&gt;
&lt;li&gt;å­—æ®µä¸ä¸€è‡´ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºä¼šæ ¹æ®ç›®æ ‡å¯¹è±¡çš„å±æ€§å»æºå¯¹è±¡ä¸­æ‰¾å¯¹åº”çš„å±æ€§æè¿°ç¬¦ï¼Œå­˜åœ¨æ‰æ‹·è´&lt;/li&gt;
&lt;li&gt;ç›¸åŒå­—æ®µï¼Œç±»å‹ä¸åŒï¼Œä¹Ÿä¸ä¼šæœ‰é—®é¢˜ï¼Œå› ä¸ºæ‹·è´ä¹‹æ—¶ä¼šåˆ¤æ–­è¯¥å­—æ®µæºå¯¹è±¡çš„è¯»æ–¹æ³•è¿”å›å€¼ï¼Œæ˜¯å¦å¯åº”ç”¨ç”¨ç›®æ ‡å¯¹è±¡çš„å†™æ–¹æ³•å‚æ•°&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;å®ä¾‹&#34;&gt;å®ä¾‹&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class CopyPropertiesDemo {

    public static void main(String[] args) {

        Student s = new Student();
        s.setName(&amp;quot;vz&amp;quot;);
        s.setFoo(1024);
        s.setBar(-1);

        Father f = new Father();
        BeanUtils.copyProperties(s, f);
        System.out.println(f);
    }

    static class Student{
        private String name;
        private int foo;
        private int bar;
        // setters and getters
    }


    static class Father{
        private String name;
        private int age;
        private int salary;
        private double foo;
        private Integer bar;
        // setters and getters

        @Override
        public String toString() {
            return &amp;quot;Father{&amp;quot; +
                    &amp;quot;name=&#39;&amp;quot; + name + &#39;\&#39;&#39; +
                    &amp;quot;, age=&amp;quot; + age +
                    &amp;quot;, salary=&amp;quot; + salary +
                    &amp;quot;, foo=&amp;quot; + foo +
                    &amp;quot;, bar=&amp;quot; + bar +
                    &#39;}&#39;;
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¾“å‡ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Father{name=&#39;vz&#39;, age=0, salary=0, foo=0.0, bar=-1}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;copyproperties-æºç åˆ†æ&#34;&gt;copyProperties æºç åˆ†æ&lt;/h2&gt;

&lt;p&gt;copyProperties çš„å®ç°æ€»ä½“ä¸Šå¾ˆæ¸…æ™°ï¼šåˆ©ç”¨åå°„ï¼Œè°ƒç”¨sourceå¯¹è±¡çš„getæ–¹æ³•ï¼Œç„¶åsetåˆ°targetå¯¹è±¡ä¸­ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public static void copyProperties(Object source, Object target) throws BeansException {
		copyProperties(source, target, null, (String[]) null);
	}

private static void copyProperties(Object source, Object target, Class&amp;lt;?&amp;gt; editable, String... ignoreProperties)
			throws BeansException {
		Class&amp;lt;?&amp;gt; actualEditable = target.getClass();

		PropertyDescriptor[] targetPds = getPropertyDescriptors(actualEditable);
		List&amp;lt;String&amp;gt; ignoreList = (ignoreProperties != null ? Arrays.asList(ignoreProperties) : null);

		for (PropertyDescriptor targetPd : targetPds) {
			Method writeMethod = targetPd.getWriteMethod();
			if (writeMethod != null &amp;amp;&amp;amp; (ignoreList == null || !ignoreList.contains(targetPd.getName()))) {
				PropertyDescriptor sourcePd = getPropertyDescriptor(source.getClass(), targetPd.getName());
				if (sourcePd != null) {
					Method readMethod = sourcePd.getReadMethod();
					if (readMethod != null &amp;amp;&amp;amp;
							ClassUtils.isAssignable(writeMethod.getParameterTypes()[0], readMethod.getReturnType())) {
						try {
							if (!Modifier.isPublic(readMethod.getDeclaringClass().getModifiers())) {
								readMethod.setAccessible(true);
							}
							Object value = readMethod.invoke(source);
							if (!Modifier.isPublic(writeMethod.getDeclaringClass().getModifiers())) {
								writeMethod.setAccessible(true);
							}
							writeMethod.invoke(target, value);
						}
						catch (Throwable ex) {
							throw new FatalBeanException(
									&amp;quot;Could not copy property &#39;&amp;quot; + targetPd.getName() + &amp;quot;&#39; from source to target&amp;quot;, ex);
						}
					}
				}
			}
		}
	}

&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;è·å–-propertydescriptor&#34;&gt;è·å– PropertyDescriptor&lt;/h2&gt;

&lt;p&gt;PropertyDescriptor æè¿°çš„æ˜¯Java Beançš„ä¸€ä¸ªå±æ€§ï¼Œå…·æœ‰è¯»å†™(getter/setter)æ–¹æ³•ï¼Œ&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public static PropertyDescriptor[] getPropertyDescriptors(Class&amp;lt;?&amp;gt; clazz) throws BeansException {
		CachedIntrospectionResults cr = CachedIntrospectionResults.forClass(clazz);
		return cr.getPropertyDescriptors();
	}

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;CachedIntrospectionResults&lt;/code&gt;ç¼“å­˜äº†Java Beanå¯¹åº”Classçš„&lt;code&gt;PropertyDescriptor&lt;/code&gt;ä¿¡æ¯ï¼Œå­˜å‚¨æ•°æ®ç»“æ„æ˜¯&lt;code&gt;ConcurrentHashMap&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;static final ConcurrentMap&amp;lt;Class&amp;lt;?&amp;gt;, CachedIntrospectionResults&amp;gt; strongClassCache =
			new ConcurrentHashMap&amp;lt;Class&amp;lt;?&amp;gt;, CachedIntrospectionResults&amp;gt;(64);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…ˆä»ç¼“å­˜ä¸­æŸ¥è¯¢ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™è¿›è¡Œå®é™…çš„è§£æï¼Œæ„é€ ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;static CachedIntrospectionResults forClass(Class&amp;lt;?&amp;gt; beanClass) throws BeansException {
		CachedIntrospectionResults results = strongClassCache.get(beanClass);
		if (results != null) {
			return results;
		}
		results = softClassCache.get(beanClass);
		if (results != null) {
			return results;
		}

        // TODO å…·ä½“çš„è§£æè¿‡ç¨‹
		results = new CachedIntrospectionResults(beanClass);
		ConcurrentMap&amp;lt;Class&amp;lt;?&amp;gt;, CachedIntrospectionResults&amp;gt; classCacheToUse;

        // TODO cachesafe ï¼Ÿ
		if (ClassUtils.isCacheSafe(beanClass, CachedIntrospectionResults.class.getClassLoader()) ||
				isClassLoaderAccepted(beanClass.getClassLoader())) {
			classCacheToUse = strongClassCache;
		}
		else {
			classCacheToUse = softClassCache;
		}

		CachedIntrospectionResults existing = classCacheToUse.putIfAbsent(beanClass, results);
		return (existing != null ? existing : results);
	}

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥ä¸‹æ¥çœ‹&lt;code&gt;CachedIntrospectionResults&lt;/code&gt;æ„é€ å‡½æ•°ï¼Œå…ˆæ˜¯åˆ©ç”¨&lt;code&gt;Introspector&lt;/code&gt;è§£æclassçš„&lt;code&gt;BeanInfo&lt;/code&gt;ï¼ˆå®ç°ç±»æ˜¯&lt;code&gt;GenericBeanInfo&lt;/code&gt;ï¼‰ï¼Œç„¶åæ›´æ–°ç¼“å­˜ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;private CachedIntrospectionResults(Class&amp;lt;?&amp;gt; beanClass) throws BeansException {
		try {
			BeanInfo beanInfo = null;
			if (beanInfo == null) {
				// If none of the factories supported the class, fall back to the default
				beanInfo = (shouldIntrospectorIgnoreBeaninfoClasses ?
						Introspector.getBeanInfo(beanClass, Introspector.IGNORE_ALL_BEANINFO) :
						Introspector.getBeanInfo(beanClass)); // è¿™é‡Œ
			}
			this.beanInfo = beanInfo;


			this.propertyDescriptorCache = new LinkedHashMap&amp;lt;String, PropertyDescriptor&amp;gt;();

			// This call is slow so we do it once.
			PropertyDescriptor[] pds = this.beanInfo.getPropertyDescriptors();
			for (PropertyDescriptor pd : pds) {
				if (Class.class == beanClass &amp;amp;&amp;amp;
						(&amp;quot;classLoader&amp;quot;.equals(pd.getName()) ||  &amp;quot;protectionDomain&amp;quot;.equals(pd.getName()))) {
					// Ignore Class.getClassLoader() and getProtectionDomain() methods - nobody needs to bind to those
					continue;
				}
				pd = buildGenericTypeAwarePropertyDescriptor(beanClass, pd);
				this.propertyDescriptorCache.put(pd.getName(), pd);
			}

			this.typeDescriptorCache = new ConcurrentReferenceHashMap&amp;lt;PropertyDescriptor, TypeDescriptor&amp;gt;();
		}
		catch (IntrospectionException ex) {
			throw new FatalBeanException(&amp;quot;Failed to obtain BeanInfo for class [&amp;quot; + beanClass.getName() + &amp;quot;]&amp;quot;, ex);
		}
	}

&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;åˆ¤æ–­æ˜¯å¦å¯èµ‹å€¼-assignable&#34;&gt;åˆ¤æ–­æ˜¯å¦å¯èµ‹å€¼ï¼ˆAssignableï¼‰&lt;/h2&gt;

&lt;p&gt;çœ‹å·¥å…·ç±»&lt;code&gt;ClassUtils&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public static boolean isAssignable(Class&amp;lt;?&amp;gt; lhsType, Class&amp;lt;?&amp;gt; rhsType) {
		if (lhsType.isAssignableFrom(rhsType)) {
			return true;
		}
		if (lhsType.isPrimitive()) {
			Class&amp;lt;?&amp;gt; resolvedPrimitive = primitiveWrapperTypeMap.get(rhsType);
			if (lhsType == resolvedPrimitive) {
				return true;
			}
		}
		else {
			Class&amp;lt;?&amp;gt; resolvedWrapper = primitiveTypeToWrapperMap.get(rhsType);
			if (resolvedWrapper != null &amp;amp;&amp;amp; lhsType.isAssignableFrom(resolvedWrapper)) {
				return true;
			}
		}
		return false;
	}

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;java.lang.Class.isAssignableFrom&lt;/code&gt;æ–¹æ³•æ˜¯nativeçš„ï¼Œåˆ¤æ–­å½“å‰ç±»å‹æ˜¯å¦æ˜¯å¦ä¸€ä¸ªçš„è¶…ç±»ï¼Œæˆ–è€…çˆ¶æ¥å£ï¼Œæˆ–è€…ç±»å‹ä¸€æ ·ï¼Œå¯ä»¥çœ‹ä¸ªä¾‹å­ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class IsAssignableFromDemo {
    public static void main(String[] args) {
        System.out.println(Object.class.isAssignableFrom(Object.class)); // true
        System.out.println(Object.class.isAssignableFrom(String.class)); // true
        System.out.println(List.class.isAssignableFrom(ArrayList.class)); // true
        System.out.println(int.class.isAssignableFrom(long.class)); //false
        System.out.println(int.class.isAssignableFrom(int.class));//true
    }
}

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;isAssignable&lt;/code&gt;åŒæ—¶ä¹Ÿä¼šè€ƒè™‘åŸå§‹ç±»å‹åŠåŒ…è£…ç±»å‹çš„æƒ…å†µï¼Œæ¯”å¦‚ int a å¯ä»¥è¢«æ‹·è´åˆ°å¦ä¸€ä¸ªå¯¹è±¡çš„ Integer a ä¸­ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>JVMåƒåœ¾å›æ”¶æ€»ç»“</title>
      <link>http://vonzhou.com/2019/jvm-gc-summary/</link>
      <pubDate>Thu, 21 Feb 2019 00:00:00 +0000</pubDate>
      
      <guid>http://vonzhou.com/2019/jvm-gc-summary/</guid>
      <description>

&lt;h2 id=&#34;1-åƒåœ¾å›æ”¶ç®—æ³•&#34;&gt;1. åƒåœ¾å›æ”¶ç®—æ³•&lt;/h2&gt;

&lt;h3 id=&#34;mark-sweep-æ ‡è®°-æ¸…é™¤-ç®—æ³•&#34;&gt;Mark-Sweep(æ ‡è®°-æ¸…é™¤)ç®—æ³•&lt;/h3&gt;

&lt;h3 id=&#34;å¤åˆ¶ç®—æ³•&#34;&gt;å¤åˆ¶ç®—æ³•&lt;/h3&gt;

&lt;h3 id=&#34;mark-compact-æ ‡è®°-æ•´ç†-ç®—æ³•&#34;&gt;Mark-Compact(æ ‡è®°-æ•´ç†)ç®—æ³•&lt;/h3&gt;

&lt;h3 id=&#34;åˆ†ä»£æ”¶é›†ç®—æ³•&#34;&gt;åˆ†ä»£æ”¶é›†ç®—æ³•&lt;/h3&gt;

&lt;h2 id=&#34;2-åƒåœ¾æ”¶é›†å™¨&#34;&gt;2. åƒåœ¾æ”¶é›†å™¨&lt;/h2&gt;

&lt;p&gt;&lt;img src=&#34;http://vonzhou.com/images/gc-collectors.jpg&#34; alt=&#34;gc-collectors&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;æ–°ç”Ÿä»£&#34;&gt;æ–°ç”Ÿä»£&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Serial&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ParNew&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ParNewæ˜¯Serialçš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œ åªæœ‰ Serialï¼ŒParNewèƒ½å’ŒCMSé…åˆä½¿ç”¨ã€‚ParNewæ˜¯ä½¿ç”¨CMSåçš„é»˜è®¤æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œå¯ä»¥ä½¿ç”¨&lt;code&gt;-XX:+UseParNewGC&lt;/code&gt;å¼ºåˆ¶æŒ‡å®šã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Parallel Scavenge&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Parallel Scavengeæ”¶é›†å™¨ï¼Œååé‡ä¼˜å…ˆï¼Œé€šè¿‡å‚æ•°å¯ä»¥æ§åˆ¶æœ€å¤§åƒåœ¾æ”¶é›†çš„åœé¡¿æ—¶é—´ï¼ˆ-XX:MaxGCPauseMillsï¼‰åŠç›´æ¥è®¾ç½®ååé‡å¤§å°ï¼ˆ-XX:GCTimeRatioï¼‰ã€‚ä¹Ÿå¯ä»¥å¼€å¯GCè‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥ï¼ˆGC Ergonomicsï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨&lt;code&gt;XX:+UseParallelGC&lt;/code&gt;å¼€å¯ï¼ŒJDK1.4.1å¼•å…¥ã€‚PSåªèƒ½å’ŒSerial Oldï¼ŒParOldæ­é…ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;Java 6ï¼Œ7ï¼Œ8 é»˜è®¤çš„æ”¶é›†å™¨æ˜¯Parallel GCï¼ˆPS + Parallel Oldï¼‰ï¼Œä½¿ç”¨&lt;code&gt;PrintFlagsFinal&lt;/code&gt;å¯ä»¥çœ‹åˆ°ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;$ ./bin/java -XX:+PrintFlagsFinal
bool UseParallelGC                            := true                                {product}
bool UseParallelOldGC                          = true                                {product}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;è€å¹´ä»£&#34;&gt;è€å¹´ä»£&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Serial Old&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Parallel Old&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Parallel Oldæ”¶é›†å™¨æ˜¯PSçš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œä½¿ç”¨å¤šçº¿ç¨‹å’Œâ€œæ ‡è®°-æ•´ç†â€ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;XX:+UseParallelOldGC&lt;/code&gt;å¼€å¯åï¼Œä¹Ÿä¼šè‡ªåŠ¨è®¾ç½®&lt;code&gt;XX:+UseParallelGC&lt;/code&gt;ï¼ŒJDK5.0 update 6å¼•å…¥ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;CMS&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;CMSæ”¶é›†å™¨ï¼Œä»¥æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ï¼ŒæœåŠ¡å“åº”é€Ÿåº¦ä¸ºç›®æ ‡ï¼Œé‡‡ç”¨æ ‡è®°-æ¸…é™¤ç®—æ³•ã€‚ä½¿ç”¨&lt;code&gt;-XX:+UseConcMarkSweepGC&lt;/code&gt;å¼€å¯ã€‚&lt;/p&gt;

&lt;h3 id=&#34;g1æ”¶é›†å™¨&#34;&gt;G1æ”¶é›†å™¨&lt;/h3&gt;

&lt;p&gt;JDK7å¼•å…¥çš„&lt;/p&gt;

&lt;p&gt;G1æ”¶é›†å™¨çš„Regionï¼Œå…¶ä»–æ”¶é›†å™¨æ–°ç”Ÿä»£å’Œè€å¹´ä»£ä¹‹é—´çš„å¯¹è±¡å¼•ç”¨ï¼ŒJVMéƒ½æ˜¯ä½¿ç”¨Remembered Setæ¥é¿å…å…¨å †æ‰«æã€‚&lt;/p&gt;

&lt;p&gt;Java 9,10é»˜è®¤çš„GC Collectoræ˜¯G1.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/G1GettingStarted/index.html&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Getting Started with the G1 Garbage Collector&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&#34;zgc&#34;&gt;ZGC&lt;/h4&gt;

&lt;p&gt;JDK11å¼•å…¥&lt;/p&gt;

&lt;p&gt;è¦å®Œæˆçš„ç›®æ ‡æ˜¯ï¼šæ§åˆ¶Javaçš„åƒåœ¾å›æ”¶æ—¶é•¿åœ¨10msä»¥å†…ï¼Œç»å¯¹ä¸è¶…è¿‡10msï¼Œå¹¶ä¸”ä½¿ç”¨äº†è¯¥åƒåœ¾å›æ”¶ç­–ç•¥ä¹‹åï¼Œååå¯¹æ¯”å½“å‰Javaç¼ºçœçš„åƒåœ¾å›æ”¶ç­–ç•¥G1ï¼Œä¸‹é™ä¸è¶…è¿‡15%&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.opsian.com/blog/javas-new-zgc-is-very-exciting/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Java&amp;rsquo;s new Z Garbage Collector (ZGC) is very exciting&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;TODO ä½¿ç”¨ä¸åŒçš„GCç®—æ³•çœ‹GCæ—¥å¿—&lt;/p&gt;

&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://blogs.oracle.com/jonthecollector/our-collectors&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Our Collectors&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.fasterj.com/articles/oraclecollectors1.shtml&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Oracle JVM Garbage Collectors Available From JDK 1.7.0_04 And After&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>InnoDB è¡Œé”çš„å®ç°</title>
      <link>http://vonzhou.com/2019/innodb-row-lock/</link>
      <pubDate>Sat, 16 Feb 2019 00:00:00 +0000</pubDate>
      
      <guid>http://vonzhou.com/2019/innodb-row-lock/</guid>
      <description>

&lt;p&gt;InnoDB å®ç°è¡Œé”ï¼ˆrow lockï¼‰çš„3ç§ç®—æ³•ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Record Lock&lt;/code&gt;ï¼šå•è¡Œè®°å½•ä¸Šé”&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Gap Lock&lt;/code&gt;ï¼šé—´éš™é”ï¼Œé”å®šä¸€ä¸ªèŒƒå›´ï¼Œä¸åŒ…æ‹¬è®°å½•æœ¬èº«&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Next-key Lock&lt;/code&gt;ï¼šç­‰ä»·äº&lt;code&gt;Gap Lock&lt;/code&gt; + &lt;code&gt;Record Lock&lt;/code&gt;ï¼Œå³é”å®šä¸€ä¸ªèŒƒå›´åŒæ—¶é”å®šè®°å½•æœ¬èº«ï¼Œä¸ºäº†è§£å†³Phantom Problemã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;è¡ŒåŠ é”è¿‡ç¨‹&#34;&gt;è¡ŒåŠ é”è¿‡ç¨‹&lt;/h2&gt;

&lt;p&gt;InnoDBçš„è¡Œé”å…¶å®æ˜¯ç´¢å¼•è®°å½•é”ï¼ŒInnoDBå­˜å‚¨å¼•æ“ä¸‹æ¯ä¸ªè¡¨æœ‰ä¸€ä¸ªä¸»é”®ï¼ˆèšé›†ç´¢å¼•ï¼‰ï¼Œè¾…åŠ©ç´¢å¼•ä¸­åŒ…å«ä¸»é”®ï¼Œæ ¹æ®æŸ¥è¯¢ä½¿ç”¨çš„ç´¢å¼•ä¸åŒåŠ é”ä¹Ÿä¸åŒã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;é€šè¿‡ä¸»é”®åŠ é”ï¼Œä»…å¯¹èšé›†ç´¢å¼•è®°å½•è¿›è¡ŒåŠ é”ï¼Œ&lt;code&gt;Record Lock&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;é€šè¿‡è¾…åŠ©ç´¢å¼•è¿›è¡ŒåŠ é”ï¼Œéœ€è¦å…ˆå¯¹è¾…åŠ©ç´¢å¼•åŠ é” &lt;code&gt;Gap Lock&lt;/code&gt;ï¼Œå†å¯¹èšé›†ç´¢å¼•åŠ é” &lt;code&gt;Record Lock&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å½“è¾…åŠ©ç´¢å¼•æ˜¯å”¯ä¸€ç´¢å¼•çš„æ—¶å€™ï¼Œ&lt;code&gt;Next-key Lock&lt;/code&gt;ä¼šé™çº§ä¸º &lt;code&gt;Record Lock&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;å®ä¾‹&#34;&gt;å®ä¾‹&lt;/h2&gt;

&lt;h3 id=&#34;å”¯ä¸€ç´¢å¼•è¡Œé”å®š&#34;&gt;å”¯ä¸€ç´¢å¼•è¡Œé”å®š&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;create table t (a int primary key);
insert into t values(1),(2),(5);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;http://vonzhou.com/images/innodb-row-lock-1.jpg&#34; alt=&#34;å”¯ä¸€ç´¢å¼•è¡Œé”å®š&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¼šè¯Aä¼šå¯¹a=5çš„è¡Œè¿›è¡ŒXé”å®šï¼Œç”±äºaæ˜¯ä¸»é”®ä¸”å”¯ä¸€ï¼Œæ‰€ä»¥åªä¼šå¯¹è¿™ä¸€è¡Œè¿›è¡Œé”å®šï¼Œæ‰€ä»¥åœ¨ä¼šè¯Bä¸­æ’å…¥a=4ä¸ä¼šé˜»å¡ã€‚&lt;/p&gt;

&lt;h3 id=&#34;è¾…åŠ©ç´¢å¼•è¡Œé”å®š&#34;&gt;è¾…åŠ©ç´¢å¼•è¡Œé”å®š&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;create table t2 (a int, b int, primary key(a), key(b));
insert into t2 values(1,1),(3,1),(5,3),(7,6),(10,8);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;http://vonzhou.com/images/innodb-row-lock-2.jpg&#34; alt=&#34;è¾…åŠ©ç´¢å¼•è¡Œé”å®š-è®°å½•é”&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¼šè¯Aå¯¹a=5çš„èšç°‡ç´¢å¼•è¡ŒåŠ äº†Record Lockï¼Œæ‰€ä»¥ä¼šè¯Bä¼šé˜»å¡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://vonzhou.com/images/innodb-row-lock-3.jpg&#34; alt=&#34;è¾…åŠ©ç´¢å¼•è¡Œé”å®š-é—´éš™é”&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¼šè¯Aä¸ä»…å¯¹a=5çš„èšç°‡ç´¢å¼•è¡ŒåŠ äº†Record Lockï¼Œä¹Ÿä¼šå¯¹è¾…åŠ©ç´¢å¼•åŠ  Next-Key Lockï¼Œé”å®šçš„èŒƒå›´æ˜¯ (1,3],(3,6)ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥åœ¨ä¼šè¯Bä¸­æ‰§è¡Œ&lt;code&gt;insert into t2 values(13,3);&lt;/code&gt;, &lt;code&gt;insert into t2 values(14,5);&lt;/code&gt;ä¹Ÿæ˜¯åŒæ ·çš„æƒ…å†µã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯æ’å…¥&lt;code&gt;b=0&lt;/code&gt;, &lt;code&gt;b=1&lt;/code&gt;, &lt;code&gt;b=5&lt;/code&gt;, &lt;code&gt;b=6&lt;/code&gt;æ—¶ä¸ä¼šé˜»å¡ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç›¸å…³&#34;&gt;ç›¸å…³&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://dev.mysql.com/doc/refman/5.5/en/innodb-locking.html&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;14.10.1 InnoDB Locking&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä¸ºä»€ä¹ˆæšä¸¾æ˜¯å®ç°å•ä¾‹æœ€å¥½çš„æ–¹å¼ï¼Ÿ</title>
      <link>http://vonzhou.com/2019/enum-singleton/</link>
      <pubDate>Thu, 14 Feb 2019 00:00:00 +0000</pubDate>
      
      <guid>http://vonzhou.com/2019/enum-singleton/</guid>
      <description>

&lt;p&gt;æåˆ°å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰ï¼Œéƒ½èƒ½è¯´å‡ºä¸€äºŒï¼Œä½†æ˜¯æ²¡é‚£ä¹ˆç®€å•ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å®ç°å•ä¾‹çš„æ–¹å¼&#34;&gt;å®ç°å•ä¾‹çš„æ–¹å¼&lt;/h2&gt;

&lt;p&gt;æœ¬æ–‡ä»£ç &lt;a href=&#34;https://github.com/vonzhou/learning-java/tree/master/src/lang/enumsingleton&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;åœ¨è¿™é‡Œ&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&#34;æ³•1-é™æ€æˆå‘˜&#34;&gt;æ³•1ï¼šé™æ€æˆå‘˜&lt;/h3&gt;

&lt;p&gt;ä¸å¤šè¯´ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class Singleton1 {
    public static final Singleton1 INSTANCE = new Singleton1();

    private Singleton1() {
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;æ³•2-é™æ€å·¥å‚&#34;&gt;æ³•2ï¼šé™æ€å·¥å‚&lt;/h3&gt;

&lt;p&gt;å’Œæ³•1ä¸€æ ·ï¼Œåªä¸è¿‡é€šè¿‡å·¥å‚æ–¹æ³•æ¥è¿”å›å®ä¾‹ï¼Œåœ¨APIè®¾è®¡ä¸Šæ›´å¯å–ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class Singleton2 {
    private static final Singleton2 INSTANCE = new Singleton2();

    private Singleton2() {
    }

    public static Singleton2 getInstance() {
        return INSTANCE;
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;æ³•3-lazy-initialization-å»¶è¿Ÿåˆå§‹åŒ–&#34;&gt;æ³•3ï¼šlazy initialization å»¶è¿Ÿåˆå§‹åŒ–&lt;/h3&gt;

&lt;p&gt;å‰é¢æ³•1ï¼Œæ³•2æ˜¯é¥¿æ±‰å¼ï¼Œlazy initialization æ˜¯æ‡’æ±‰å¼ï¼Œéœ€è¦çš„æ—¶å€™å®ä¾‹åŒ–ï¼Œå¦å¤– double checkã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class Singleton3 {
    private static Singleton3 INSTANCE = null;

    private Singleton3() {
    }

    public static Singleton3 getInstance() {
        if (INSTANCE == null) {
            synchronized (Singleton3.class) {
                if (INSTANCE == null) {
                    INSTANCE = new Singleton3();
                }
            }
        }
        return INSTANCE;
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™3ç§æ–¹æ³•æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯æŠŠæ„é€ å™¨ææˆç§æœ‰çš„ï¼Œæ§åˆ¶å®ä¾‹åŒ–çš„è¿‡ç¨‹ã€‚ä½†æ˜¯ &lt;code&gt;private constructor&lt;/code&gt; æ˜¯å¯ä»¥è¢«ç»•è¿‡çš„ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;åºåˆ—åŒ–ï¼Œååºåˆ—åŒ–&lt;/li&gt;
&lt;li&gt;åå°„&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;åºåˆ—åŒ–&#34;&gt;åºåˆ—åŒ–&lt;/h3&gt;

&lt;p&gt;Singleton1å®ä¾‹åºåˆ—åŒ–ï¼Œç„¶åååºåˆ—åŒ–ä¼šå¾—åˆ°ä¸€ä¸ªä¸åŒçš„å¯¹è±¡ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class Singleton1 implements Serializable {
    public static final Singleton1 INSTANCE = new Singleton1();

    private Singleton1() {
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class SingletonSerializationDemo {

    public static void main(String[] args) {
        // å¯¹äºSingleton2, å¯¹äºSingleton3 è¡¨ç°æ˜¯ä¸€æ ·çš„
        Singleton1 obj1 = Singleton1.INSTANCE;
        Singleton1 obj2 = Singleton1.INSTANCE;
        System.out.println(obj1 == obj2 ? &amp;quot;Two objects are same&amp;quot; : &amp;quot;Two objects are different&amp;quot;);

        // åºåˆ—åŒ– obj1
        try {
            ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(&amp;quot;out.ser&amp;quot;));
            out.writeObject(obj1);
            out.close();
        } catch (IOException e) {
            e.printStackTrace();
        }


        Singleton1 obj3 = null;
        try {
            ObjectInputStream in = new ObjectInputStream(new FileInputStream(&amp;quot;out.ser&amp;quot;));
            obj3 = (Singleton1) in.readObject();
            in.close();
        } catch (Exception i) {
            i.printStackTrace();
        }

        System.out.println(obj1 == obj3 ? &amp;quot;Two objects are same&amp;quot; : &amp;quot;Two objects are different&amp;quot;);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¾“å‡ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Two objects are same
Two objects are different
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‰€ä»¥è¿™æ ·å°±è¿èƒŒäº†å•ä¾‹çš„åˆè¡·ã€‚ä¸ºäº†ä½¿å¾—ååºåˆ—åŒ–åçš„å¯¹è±¡æ˜¯åŒä¸€ä¸ªï¼Œæˆ‘ä»¬å¯ä»¥æä¾›&lt;code&gt;readResolve&lt;/code&gt;æ–¹æ³•ï¼Œä¼šåœ¨ååºåˆ—è¿‡ç¨‹ä¸­è¢«è°ƒç”¨ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class Singleton1 implements Serializable {
    public static final Singleton1 INSTANCE = new Singleton1();

    private Singleton1() {
    }

    // æ³¨é‡Šæ‰è¯¥æ–¹æ³•ï¼Œ è¿›è¡Œå¯¹æ¯”
    protected Object readResolve() {
        return INSTANCE;
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¾“å‡ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Two objects are same
Two objects are same
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;åå°„&#34;&gt;åå°„&lt;/h3&gt;

&lt;p&gt;é¢å¯¹åå°„ï¼Œprivate constructorä¹Ÿæ˜¯æ— èƒ½ä¸ºåŠ›ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class SingletonReflectionDemo {
    public static void main(String[] args) throws Exception {
        Singleton1 obj1 = Singleton1.INSTANCE;
        // å¾—åˆ°æ— å‚æ„é€ å™¨
        Constructor constructor = obj1.getClass().getDeclaredConstructor(new Class[0]);
        // è¿™é‡Œä½¿ç§æœ‰æ„é€ å™¨å¯ä»¥è®¿é—®
        constructor.setAccessible(true);
        Singleton1 obj2 = (Singleton1) constructor.newInstance();
        System.out.println(obj1 == obj2 ? &amp;quot;Two objects are same&amp;quot; : &amp;quot;Two objects are different&amp;quot;);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¾“å‡ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Two objects are different
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é‚£ä¹ˆé¢å¯¹åºåˆ—åŒ–ï¼Œåå°„ï¼Œæœ‰æ²¡æœ‰æ›´å¥½å®ç°Singletonçš„æ–¹å¼ï¼Ÿenum&amp;hellip;..&lt;/p&gt;

&lt;h2 id=&#34;enumæ˜¯å®ç°å•ä¾‹æœ€å¥½çš„æ–¹å¼-æ³•4&#34;&gt;enumæ˜¯å®ç°å•ä¾‹æœ€å¥½çš„æ–¹å¼ï¼ˆæ³•4ï¼‰&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public enum SingletonUsingEnum {
    INSTANCE
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;ååºåˆ—åŒ–å¾—åˆ°çš„ä¹Ÿæ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class SingletonUsingEnumSerializationDemo {
    public static void main(String[] args) {
        SingletonUsingEnum obj1 = SingletonUsingEnum.INSTANCE;

        // åºåˆ—åŒ– obj1
        try {
            ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(&amp;quot;out.ser&amp;quot;));
            out.writeObject(obj1);
            out.close();
        } catch (IOException e) {
            e.printStackTrace();
        }


        SingletonUsingEnum obj3 = null;
        try {
            ObjectInputStream in = new ObjectInputStream(new FileInputStream(&amp;quot;out.ser&amp;quot;));
            obj3 = (SingletonUsingEnum) in.readObject();
            in.close();
        } catch (Exception i) {
            i.printStackTrace();
        }
        System.out.println(obj1 == obj3 ? &amp;quot;Two objects are same&amp;quot; : &amp;quot;Two objects are different&amp;quot;);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¾“å‡ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Two objects are same
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;ä½¿ç”¨åå°„åˆ›å»ºEnumå®ä¾‹çš„æ—¶å€™ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class SingletonUsingEnumReflectionDemo {
    public static void main(String[] args) throws Exception {
        SingletonUsingEnum obj1 = SingletonUsingEnum.INSTANCE;
        Constructor constructor = obj1.getClass().getDeclaredConstructors()[0];
        constructor.setAccessible(true);
        SingletonUsingEnum obj2 = (SingletonUsingEnum) constructor.newInstance();
        System.out.println(obj1 == obj2 ? &amp;quot;Two objects are same&amp;quot; : &amp;quot;Two objects are different&amp;quot;);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¾“å‡ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Exception in thread &amp;quot;main&amp;quot; java.lang.IllegalArgumentException: Cannot reflectively create enum objects
	at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
	at lang.enumsingleton.SingletonUsingEnumReflectionDemo.main(SingletonUsingEnumReflectionDemo.java:16)
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;æšä¸¾æ˜¯ä¸€ä¸ªè¯­æ³•ç³–&#34;&gt;æšä¸¾æ˜¯ä¸€ä¸ªè¯­æ³•ç³–&lt;/h2&gt;

&lt;p&gt;ä¸€ä¸ªä¾‹å­å¼€å§‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public enum ColorEnum {
    RED,
    BLUE
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯¹classæ–‡ä»¶è¿›è¡Œåç¼–è¯‘ï¼Œ &lt;code&gt;javap -v ColorEnum.class&lt;/code&gt; è¾“å‡ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Classfile /D:/GitHub/learning-java/target/classes/lang/ColorEnum.class
  Last modified 2019-2-14; size 898 bytes
  MD5 checksum 79dff593c44747f1648cd48465351caf
  Compiled from &amp;quot;ColorEnum.java&amp;quot;
public final class lang.ColorEnum extends java.lang.Enum&amp;lt;lang.ColorEnum&amp;gt;
  minor version: 0
  major version: 52
  flags: ACC_PUBLIC, ACC_FINAL, ACC_SUPER, ACC_ENUM
Constant pool:
   #1 = Fieldref           #4.#36         // lang/ColorEnum.$VALUES:[Llang/ColorEnum;
   #2 = Methodref          #37.#38        // &amp;quot;[Llang/ColorEnum;&amp;quot;.clone:()Ljava/lang/Object;
   #3 = Class              #17            // &amp;quot;[Llang/ColorEnum;&amp;quot;
   #4 = Class              #39            // lang/ColorEnum
   #5 = Methodref          #12.#40        // java/lang/Enum.valueOf:(Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Enum;
   #6 = Methodref          #12.#41        // java/lang/Enum.&amp;quot;&amp;lt;init&amp;gt;&amp;quot;:(Ljava/lang/String;I)V
   #7 = String             #13            // RED
   #8 = Methodref          #4.#41         // lang/ColorEnum.&amp;quot;&amp;lt;init&amp;gt;&amp;quot;:(Ljava/lang/String;I)V
   #9 = Fieldref           #4.#42         // lang/ColorEnum.RED:Llang/ColorEnum;
  #10 = String             #15            // BLUE
  #11 = Fieldref           #4.#43         // lang/ColorEnum.BLUE:Llang/ColorEnum;
  #12 = Class              #44            // java/lang/Enum
  #13 = Utf8               RED
  #14 = Utf8               Llang/ColorEnum;
  #15 = Utf8               BLUE
  #16 = Utf8               $VALUES
  #17 = Utf8               [Llang/ColorEnum;
  #18 = Utf8               values
  #19 = Utf8               ()[Llang/ColorEnum;
  #20 = Utf8               Code
  #21 = Utf8               LineNumberTable
  #22 = Utf8               valueOf
  #23 = Utf8               (Ljava/lang/String;)Llang/ColorEnum;
  #24 = Utf8               LocalVariableTable
  #25 = Utf8               name
  #26 = Utf8               Ljava/lang/String;
  #27 = Utf8               &amp;lt;init&amp;gt;
  #28 = Utf8               (Ljava/lang/String;I)V
  #29 = Utf8               this
  #30 = Utf8               Signature
  #31 = Utf8               ()V
  #32 = Utf8               &amp;lt;clinit&amp;gt;
  #33 = Utf8               Ljava/lang/Enum&amp;lt;Llang/ColorEnum;&amp;gt;;
  #34 = Utf8               SourceFile
  #35 = Utf8               ColorEnum.java
  #36 = NameAndType        #16:#17        // $VALUES:[Llang/ColorEnum;
  #37 = Class              #17            // &amp;quot;[Llang/ColorEnum;&amp;quot;
  #38 = NameAndType        #45:#46        // clone:()Ljava/lang/Object;
  #39 = Utf8               lang/ColorEnum
  #40 = NameAndType        #22:#47        // valueOf:(Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Enum;
  #41 = NameAndType        #27:#28        // &amp;quot;&amp;lt;init&amp;gt;&amp;quot;:(Ljava/lang/String;I)V
  #42 = NameAndType        #13:#14        // RED:Llang/ColorEnum;
  #43 = NameAndType        #15:#14        // BLUE:Llang/ColorEnum;
  #44 = Utf8               java/lang/Enum
  #45 = Utf8               clone
  #46 = Utf8               ()Ljava/lang/Object;
  #47 = Utf8               (Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Enum;
{
  public static final lang.ColorEnum RED;
    descriptor: Llang/ColorEnum;
    flags: ACC_PUBLIC, ACC_STATIC, ACC_FINAL, ACC_ENUM

  public static final lang.ColorEnum BLUE;
    descriptor: Llang/ColorEnum;
    flags: ACC_PUBLIC, ACC_STATIC, ACC_FINAL, ACC_ENUM

  public static lang.ColorEnum[] values();
    descriptor: ()[Llang/ColorEnum;
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=1, locals=0, args_size=0
         0: getstatic     #1                  // Field $VALUES:[Llang/ColorEnum;
         3: invokevirtual #2                  // Method &amp;quot;[Llang/ColorEnum;&amp;quot;.clone:()Ljava/lang/Object;
         6: checkcast     #3                  // class &amp;quot;[Llang/ColorEnum;&amp;quot;
         9: areturn
      LineNumberTable:
        line 7: 0

  public static lang.ColorEnum valueOf(java.lang.String);
    descriptor: (Ljava/lang/String;)Llang/ColorEnum;
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=2, locals=1, args_size=1
         0: ldc           #4                  // class lang/ColorEnum
         2: aload_0
         3: invokestatic  #5                  // Method java/lang/Enum.valueOf:(Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Enum;
         6: checkcast     #4                  // class lang/ColorEnum
         9: areturn
      LineNumberTable:
        line 7: 0
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0      10     0  name   Ljava/lang/String;

  static {};
    descriptor: ()V
    flags: ACC_STATIC
    Code:
      stack=4, locals=0, args_size=0
         0: new           #4                  // class lang/ColorEnum
         3: dup
         4: ldc           #7                  // String RED
         6: iconst_0
         7: invokespecial #8                  // Method &amp;quot;&amp;lt;init&amp;gt;&amp;quot;:(Ljava/lang/String;I)V
        10: putstatic     #9                  // Field RED:Llang/ColorEnum;
        13: new           #4                  // class lang/ColorEnum
        16: dup
        17: ldc           #10                 // String BLUE
        19: iconst_1
        20: invokespecial #8                  // Method &amp;quot;&amp;lt;init&amp;gt;&amp;quot;:(Ljava/lang/String;I)V
        23: putstatic     #11                 // Field BLUE:Llang/ColorEnum;
        26: iconst_2
        27: anewarray     #4                  // class lang/ColorEnum
        30: dup
        31: iconst_0
        32: getstatic     #9                  // Field RED:Llang/ColorEnum;
        35: aastore
        36: dup
        37: iconst_1
        38: getstatic     #11                 // Field BLUE:Llang/ColorEnum;
        41: aastore
        42: putstatic     #1                  // Field $VALUES:[Llang/ColorEnum;
        45: return
      LineNumberTable:
        line 8: 0
        line 9: 13
        line 7: 26
}
Signature: #33                          // Ljava/lang/Enum&amp;lt;Llang/ColorEnum;&amp;gt;;
SourceFile: &amp;quot;ColorEnum.java&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å®šä¹‰çš„æšä¸¾æœ€ç»ˆå°±æ˜¯ä¸€ä¸ªç»§æ‰¿äº†&lt;code&gt;java.lang.Enum&lt;/code&gt;çš„ç±»&lt;/li&gt;
&lt;li&gt;ç”Ÿæˆäº†2ä¸ªé™æ€æ–¹æ³•&lt;code&gt;valueOf()&lt;/code&gt;, &lt;code&gt;values()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å®šä¹‰äº†2ä¸ª&lt;code&gt;static final&lt;/code&gt;å˜é‡ &lt;code&gt;RED&lt;/code&gt;, &lt;code&gt;BLUE&lt;/code&gt;ï¼Œå¹¶ä¸”åœ¨é™æ€å—ä¸­è¿›è¡Œäº†å®ä¾‹åŒ–&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;enum-åˆ†æ&#34;&gt;Enum åˆ†æ&lt;/h2&gt;

&lt;p&gt;&lt;img src=&#34;http://vonzhou.com/images/enum.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public abstract class Enum&amp;lt;E extends Enum&amp;lt;E&amp;gt;&amp;gt; implements Comparable&amp;lt;E&amp;gt;, Serializable {
    private final String name;
    private final int ordinal;

    public final String name() {
        return this.name;
    }

    public final int ordinal() {
        return this.ordinal;
    }

    protected Enum(String var1, int var2) {
        this.name = var1;
        this.ordinal = var2;
    }

    public String toString() {
        return this.name;
    }

    public final boolean equals(Object var1) {
        return this == var1;
    }

    public final int hashCode() {
        return super.hashCode();
    }

    protected final Object clone() throws CloneNotSupportedException {
        throw new CloneNotSupportedException();
    }

    public final int compareTo(E var1) {
        if (this.getClass() != var1.getClass() &amp;amp;&amp;amp; this.getDeclaringClass() != var1.getDeclaringClass()) {
            throw new ClassCastException();
        } else {
            return this.ordinal - var1.ordinal;
        }
    }

    public final Class&amp;lt;E&amp;gt; getDeclaringClass() {
        Class var1 = this.getClass();
        Class var2 = var1.getSuperclass();
        return var2 == Enum.class ? var1 : var2;
    }

    public static &amp;lt;T extends Enum&amp;lt;T&amp;gt;&amp;gt; T valueOf(Class&amp;lt;T&amp;gt; var0, String var1) {
        Enum var2 = (Enum)var0.enumConstantDirectory().get(var1);
        if (var2 != null) {
            return var2;
        } else if (var1 == null) {
            throw new NullPointerException(&amp;quot;Name is null&amp;quot;);
        } else {
            throw new IllegalArgumentException(&amp;quot;No enum constant &amp;quot; + var0.getCanonicalName() + &amp;quot;.&amp;quot; + var1);
        }
    }

    // enum class ä¸èƒ½å®ç° finalize æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆï¼Ÿï¼Ÿ
    protected final void finalize() {
    }

    private void readObject(ObjectInputStream var1) throws IOException, ClassNotFoundException {
        throw new InvalidObjectException(&amp;quot;can&#39;t deserialize enum&amp;quot;);
    }

    private void readObjectNoData() throws ObjectStreamException {
        throw new InvalidObjectException(&amp;quot;can&#39;t deserialize enum&amp;quot;);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥ä¸‹æ¥çœ‹çœ‹Enumçš„åºåˆ—åŒ–ï¼Œååºåˆ—åŒ–è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;Enumåºåˆ—åŒ–çš„å®ç°åœ¨&lt;code&gt;java.io.ObjectOutputStream.writeEnum&lt;/code&gt;ä¸­ï¼Œå¯ä»¥çœ‹åˆ°&lt;strong&gt;åªå¯¹æšä¸¾çš„åç§°è¿›è¡Œäº†åºåˆ—åŒ–&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;private void writeEnum(Enum&amp;lt;?&amp;gt; en,
                           ObjectStreamClass desc,
                           boolean unshared)
        throws IOException
    {
        bout.writeByte(TC_ENUM); // ç‰¹æ®Šæ ‡è®°
        ObjectStreamClass sdesc = desc.getSuperDesc();
        writeClassDesc((sdesc.forClass() == Enum.class) ? desc : sdesc, false);
        handles.assign(unshared ? null : en);
        // è¿™é‡Œ
        writeString(en.name(), false);
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ååºåˆ—åŒ–çš„å®ç°åœ¨&lt;code&gt;java.io.ObjectInputStream.readEnum&lt;/code&gt;ï¼Œè¯»å‡ºEnumçš„nameä¹‹åï¼Œä»å¸¸é‡å­—å…¸ä¸­æŸ¥æ‰¾å‡ºå¯¹åº”çš„æšä¸¾å¸¸é‡ï¼Œä¿è¯äº†å”¯ä¸€æ€§ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;private Enum&amp;lt;?&amp;gt; readEnum(boolean unshared) throws IOException {
        if (bin.readByte() != TC_ENUM) {
            throw new InternalError();
        }

        ObjectStreamClass desc = readClassDesc(false);
        if (!desc.isEnum()) {
            throw new InvalidClassException(&amp;quot;non-enum class: &amp;quot; + desc);
        }

        int enumHandle = handles.assign(unshared ? unsharedMarker : null);
        ClassNotFoundException resolveEx = desc.getResolveException();
        if (resolveEx != null) {
            handles.markException(enumHandle, resolveEx);
        }

        String name = readString(false);
        Enum&amp;lt;?&amp;gt; result = null;
        Class&amp;lt;?&amp;gt; cl = desc.forClass();
        if (cl != null) {
            try {
                // å…³é”®ä»£ç 
                @SuppressWarnings(&amp;quot;unchecked&amp;quot;)
                Enum&amp;lt;?&amp;gt; en = Enum.valueOf((Class)cl, name);
                result = en;
            } catch (IllegalArgumentException ex) {
                throw (IOException) new InvalidObjectException(
                    &amp;quot;enum constant &amp;quot; + name + &amp;quot; does not exist in &amp;quot; +
                    cl).initCause(ex);
            }
            if (!unshared) {
                handles.setObject(enumHandle, result);
            }
        }

        handles.finish(enumHandle);
        passHandle = enumHandle;
        return result;
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œenumæ˜¯å®ç°å•ä¾‹æœ€å¥½çš„æ–¹å¼ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>å¤§é¢ç§¯offset commitå¤±è´¥ï¼Œå¯¼è‡´ä¸åœRebalanceï¼Œå¤§é‡æ¶ˆæ¯é‡å¤æ¶ˆè´¹çš„é—®é¢˜</title>
      <link>http://vonzhou.com/2019/kafka-consumer-rebalance-jitter/</link>
      <pubDate>Wed, 30 Jan 2019 00:00:00 +0000</pubDate>
      
      <guid>http://vonzhou.com/2019/kafka-consumer-rebalance-jitter/</guid>
      <description>

&lt;h2 id=&#34;åœºæ™¯&#34;&gt;åœºæ™¯&lt;/h2&gt;

&lt;p&gt;&lt;img src=&#34;http://vonzhou.com/images/kafka-consumer-rebalance-jitter-1.png&#34; alt=&#34;æ¶ˆè´¹æµç¨‹&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨spring-kafkaï¼ŒListeneræ–¹æ³•ä¸­æŠŠæ”¶åˆ°çš„æ¶ˆæ¯æŠ•é€’åˆ°Disruptoré˜Ÿåˆ—ä¸­ï¼Œç„¶åDisruptorå•ConsumeræŠŠæ¶ˆæ¯æ’å…¥åˆ°DBä¸­ã€‚&lt;/p&gt;

&lt;p&gt;é‡‡ç”¨çš„æ‰‹åŠ¨ACKã€‚&lt;/p&gt;

&lt;h2 id=&#34;ä¸¥é‡é—®é¢˜çš„å‡ºç°&#34;&gt;ä¸¥é‡é—®é¢˜çš„å‡ºç°&lt;/h2&gt;

&lt;p&gt;æ–°ç‰ˆæœ¬å‘å¸ƒä¹‹æ—¶ï¼Œæ¥åˆ°å¤§é‡çš„æŠ¥è­¦å¼‚å¸¸ï¼ŒConsumerä¸åœçš„è¿›è¡ŒRebalanceï¼Œä¸åœçš„è¿›è¡Œåˆ†åŒºé‡åˆ†é…ï¼Œoffsetæäº¤å¤±è´¥ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;2019-01-29 23:59:24 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-kafka-consumer-1] ERROR o.a.k.c.c.i.ConsumerCoordinator.handle 550 - Error UNKNOWN_MEMBER_ID occurred while committing offsets for group xxxxx_group
2019-01-29 23:59:24 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-kafka-consumer-1] ERROR o.a.k.c.c.i.ConsumerCoordinator.onJoinPrepare 254 - User provided listener org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer$1 failed on partition revocation:
org.apache.kafka.clients.consumer.CommitFailedException: Commit cannot be completed due to group rebalance
	at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator$OffsetCommitResponseHandler.handle(ConsumerCoordinator.java:552)
	at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator$OffsetCommitResponseHandler.handle(ConsumerCoordinator.java:493)
	at org.apache.kafka.clients.consumer.internals.AbstractCoordinator$CoordinatorResponseHandler.onSuccess(AbstractCoordinator.java:665)
	at org.apache.kafka.clients.consumer.internals.AbstractCoordinator$CoordinatorResponseHandler.onSuccess(AbstractCoordinator.java:644)
	at org.apache.kafka.clients.consumer.internals.RequestFuture$1.onSuccess(RequestFuture.java:167)
	at org.apache.kafka.clients.consumer.internals.RequestFuture.fireSuccess(RequestFuture.java:133)
	at org.apache.kafka.clients.consumer.internals.RequestFuture.complete(RequestFuture.java:107)
	at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient$RequestFutureCompletionHandler.onComplete(ConsumerNetworkClient.java:380)
	at org.apache.kafka.clients.NetworkClient.poll(NetworkClient.java:274)
	at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.clientPoll(ConsumerNetworkClient.java:320)
	at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:213)
	at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:193)
	at org.apache.kafka.clients.consumer.internals.ConsumerNetworkClient.poll(ConsumerNetworkClient.java:163)
	at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.commitOffsetsSync(ConsumerCoordinator.java:358)
	at org.apache.kafka.clients.consumer.KafkaConsumer.commitSync(KafkaConsumer.java:968)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.ackImmediate(KafkaMessageListenerContainer.java:578)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.manualAck(KafkaMessageListenerContainer.java:559)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.handleManualAcks(KafkaMessageListenerContainer.java:550)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.processCommits(KafkaMessageListenerContainer.java:624)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.stopInvokerAndCommitManualAcks(KafkaMessageListenerContainer.java:504)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.access$900(KafkaMessageListenerContainer.java:221)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer$1.onPartitionsRevoked(KafkaMessageListenerContainer.java:297)
	at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.onJoinPrepare(ConsumerCoordinator.java:250)
	at org.apache.kafka.clients.consumer.internals.AbstractCoordinator.ensureActiveGroup(AbstractCoordinator.java:207)
	at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.ensurePartitionAssignment(ConsumerCoordinator.java:311)
	at org.apache.kafka.clients.consumer.KafkaConsumer.pollOnce(KafkaConsumer.java:890)
	at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:853)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:408)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:745)
2019-01-29 23:59:24 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-kafka-consumer-1] INFO  o.a.k.c.c.i.AbstractCoordinator.handle 354 - Attempt to join group xxxxx_group failed due to unknown member id, resetting and retrying.
2019-01-29 23:59:48 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-kafka-consumer-4] INFO  o.a.k.c.c.i.AbstractCoordinator.handle 623 - Attempt to heart beat failed since the group is rebalancing, try to re-join group.
2019-01-29 23:59:48 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-kafka-consumer-4] INFO  o.s.k.l.KafkaMessageListenerContainer.onPartitionsRevoked 224 - partitions revoked:[]
2019-01-29 23:59:48 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-kafka-consumer-2] INFO  o.a.k.c.c.i.AbstractCoordinator.handle 623 - Attempt to heart beat failed since the group is rebalancing, try to re-join group.
2019-01-29 23:59:48 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-kafka-consumer-2] INFO  o.s.k.l.KafkaMessageListenerContainer.onPartitionsRevoked 224 - partitions revoked:[]
2019-01-29 23:59:48 [org.springframework.kafka.KafkaListenerEndpointContainer#1-0-kafka-consumer-1] INFO  o.a.k.c.c.i.AbstractCoordinator.handle 623 - Attempt to heart beat failed since the group is rebalancing, try to re-join group.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;offsetæäº¤å¤±è´¥ï¼Œå¸¦æ¥çš„é—®é¢˜å°±æ˜¯å¤§é‡çš„æ¶ˆæ¯è¢«é‡å¤æ¶ˆè´¹ï¼Œç›¸äº’å½±å“ï¼Œä¸æ–­æ¶åŒ–ï¼Œå¯¼è‡´æ¶ˆæ¯å †ç§¯å¾ˆä¸¥é‡ï¼Œæ— æ³•æ¨è¿›ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate record.
	at sun.reflect.GeneratedConstructorAccessor45.newInstance(Unknown Source)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
	at com.mysql.jdbc.Util.getInstance(Util.java:386)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1041)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4120)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4052)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2503)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2664)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2815)
	at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
	at com.mysql.jdbc.PreparedStatement.execute$sentryProxy(PreparedStatement.java:1379)
	at com.mysql.jdbc.PreparedStatement.execute(PreparedStatement.java)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:493)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:46)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:198)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:185)
	at sun.reflect.GeneratedMethodAccessor84.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:434)
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;è§£å†³&#34;&gt;è§£å†³&lt;/h2&gt;

&lt;p&gt;å‡ºç°&lt;code&gt;Error UNKNOWN_MEMBER_ID occurred while committing offsets for group&lt;/code&gt;çš„åŸå› æ˜¯åœ¨kafka consumerä¼šè¯è¶…æ—¶çš„æ—¶å€™ï¼Œæ²¡æœ‰èƒ½æŠŠoffsetæäº¤åˆ°brokerï¼Œæ‰€ä»¥è¦ä¹ˆè¶…æ—¶æ—¶é—´&lt;code&gt;session.timeout.ms&lt;/code&gt;è®¾ç½®çš„å¤ªçŸ­äº†ï¼Œè¦ä¹ˆæ¶ˆæ¯çš„å¤„ç†å¤ªæ…¢äº†å½±å“äº†ACKçš„æ‰§è¡Œï¼Œè¦ä¹ˆè™½ç„¶æ˜¯é‡‡ç”¨äº†çº¿ç¨‹æ± çš„æ–¹å¼ï¼Œä½†æ˜¯consumeråœ¨æŠŠæ¶ˆæ¯å…¥é˜Ÿçš„æ—¶å€™é˜»å¡äº†ï¼Œä»è€Œå½±å“ACKã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥æ€»ç»“ä¸‹æ¥è§£å†³çš„æ€è·¯æ˜¯ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;è°ƒå‚ &lt;code&gt;session.timeout.ms&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åŠ å¿«æ¶ˆæ¯çš„æ¶ˆè´¹é€Ÿåº¦ï¼Œæˆ‘æ¨èçš„æ–¹å¼æ˜¯å•Consumeræ‹¿åˆ°æ¶ˆæ¯åæ”¾åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œå¤šçº¿ç¨‹çš„æ–¹å¼è¿›è¡Œæ¶ˆè´¹å¤„ç†ï¼Œè®¾ç½®ShutdownHookä¿è¯å…³é—­çš„æ—¶å€™é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ä¸ä¸¢å¤±&lt;/li&gt;
&lt;li&gt;é‡‡ç”¨è‡ªåŠ¨commitçš„æ–¹å¼ï¼Œä½†æ˜¯æœ‰æ•°æ®ä¸¢å¤±çš„é£é™©&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åœ¨æˆ‘ä»¬çš„åœºæ™¯ä¸­ï¼Œé—®é¢˜åº”è¯¥å‡ºåœ¨spring-kafka-listenerå–æ¶ˆæ¯çš„é€Ÿåº¦è¿‡å¿«ï¼Œé˜»å¡åœ¨æŠŠæ¶ˆæ¯æŠ•é€’åˆ°Disruptorä¸­ï¼Œæ‰€ä»¥è¿˜æœ‰ä¸€ç‚¹ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;é™ä½spring-kafkaçš„å¹¶å‘åº¦&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æœ€ç»ˆçš„æ•ˆæœï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://vonzhou.com/images/kafka-consumer-rebalance-jitter-2.png&#34; alt=&#34;commitå¤±è´¥è¶‹åŠ¿å›¾&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Kafkaçš„å‚æ•°å¸¸ç”¨çš„è¦çŸ¥é“ï¼Œä¸è¦ç›²ç›®è®¾ç½®&lt;/li&gt;
&lt;li&gt;é‡åˆ°é—®é¢˜æ— ä»ä¸‹æ‰‹çš„æ—¶å€™ï¼Œçœ‹çœ‹æºç ï¼Œæ‰¾åˆ°æ ¹æº&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Nginxåç«¯å“åº”ä¸å®Œæ•´é—®é¢˜åˆ†æ</title>
      <link>http://vonzhou.com/2019/nginx-temp-file/</link>
      <pubDate>Fri, 04 Jan 2019 00:00:00 +0000</pubDate>
      
      <guid>http://vonzhou.com/2019/nginx-temp-file/</guid>
      <description>

&lt;p&gt;Nginxé»˜è®¤ä¼šå¼€å¯proxy bufferï¼Œå¦‚æœæ²¡æœ‰æƒé™å†™ä¸´æ—¶æ–‡ä»¶ï¼Œå°±ä¼šå¯¼è‡´å“åº”è¢«æˆªå–ã€‚&lt;/p&gt;

&lt;h2 id=&#34;åœºæ™¯&#34;&gt;åœºæ™¯&lt;/h2&gt;

&lt;p&gt;å®ç°äº†ä¸€ä¸ªç®€å•çš„æ–‡ä»¶å­˜å‚¨æœåŠ¡å™¨ï¼Œå¯ä»¥ä¸Šä¼ ï¼Œä¸‹è½½ï¼Œä¸ºäº†ä½¿ç”¨ç®€å•ï¼Œä½¿ç”¨äº†Nginxé…ç½®äº†ç«¯å£è½¬å‘ï¼Œè¿™æ ·è®¿é—®æ—¶æ— éœ€åŒ…å«ç«¯å£ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;wget http://10.240.208.36/api/v1/fileserv/download?objName=xxxxx.zip
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½†æ˜¯ä»Šå¤©åœ¨ä¸‹è½½æ–‡ä»¶æ—¶å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œä¸€ä¸ª40Mçš„æ–‡ä»¶ï¼Œä¸‹è½½ååªæœ‰100Käº†ï¼Œå…³é”®åœ¨äºåªè¦ç»è¿‡Nginxè®¿é—®å°±ä¸å®Œæ•´ï¼Œç›´æ¥è®¿é—®åç«¯æ¥å£å°±æ˜¯OKçš„ï¼Œé‚£ä¹ˆé—®é¢˜åº”è¯¥å‡ºåœ¨Nginxçš„é…ç½®æ–¹é¢ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;nginx-temp-file-1.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨Nginxçš„é”™è¯¯æ—¥å¿—ä¸­æœ‰å¦‚ä¸‹çš„é”™è¯¯ä¿¡æ¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;2019/01/04 10:44:36 [crit] 14545#14545: *65 open() &amp;quot;/var/lib/nginx/proxy/5/00/0000000005&amp;quot; failed (13: Permission denied) while reading upstream, client: 10.240.208.36, server: _, request: &amp;quot;GET /api/v1/fileserv/download?objName=1546565995465_06a7c789611eb727cc95c529718e675e.apk HTTP/1.1&amp;quot;, upstream: &amp;quot;http://127.0.0.1:9197/api/v1/fileserv/download?objName=1546565995465_06a7c789611eb727cc95c529718e675e.apk&amp;quot;, host: &amp;quot;10.240.208.163&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯åŠ¨Nginxçš„ç”¨æˆ·æ— æƒé™å†™ /var/lib/nginx/proxy ç›®å½•ï¼Œå¯¼è‡´åç»­çš„å†…å®¹æ— æ³•è¿”å›ï¼Œæ‰€ä»¥ä¸‹è½½çš„æ–‡ä»¶ä¸å®Œæ•´ã€‚&lt;/p&gt;

&lt;h2 id=&#34;åŸç†&#34;&gt;åŸç†&lt;/h2&gt;

&lt;p&gt;Nginxä»£ç†ç¼“å­˜ï¼ˆ&lt;a href=&#34;http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffering&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;proxy_buffering&lt;/a&gt;ï¼‰å¼€å¯åï¼ˆ&lt;code&gt;proxy_buffering on&lt;/code&gt;ï¼Œé»˜è®¤æ˜¯å¼€å¯çš„ï¼‰ï¼Œå½“Nginxä»åç«¯æœåŠ¡å™¨æ”¶åˆ°å“åº”åï¼Œè¯¥responseçš„å‰é¢éƒ¨åˆ†ä¼šç¼“å­˜èµ·æ¥ï¼ˆå¯ä»¥é€šè¿‡&lt;code&gt;proxy_buffer_size&lt;/code&gt;è®¾ç½®ï¼Œé»˜è®¤æ˜¯ä¸€ä¸ªå†…å­˜é¡µå¤§å°ï¼Œ4Kæˆ–è€…8Kï¼‰ï¼Œå¦‚æœbufferçš„å¤§å°æ— æ³•å®¹çº³æ•´ä¸ªå“åº”ï¼Œå‰©ä¸‹çš„éƒ¨åˆ†ä¼šå†™åˆ°ä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œå†™ä¸´æ—¶æ–‡ä»¶å¯ä»¥é€šè¿‡é€‰é¡¹ &lt;code&gt;proxy_max_temp_file_size&lt;/code&gt; å’Œ &lt;code&gt;proxy_temp_path&lt;/code&gt;æ§åˆ¶ï¼Œå…¶ä¸­&lt;code&gt;proxy_max_temp_file_size&lt;/code&gt;æ§åˆ¶ä¸´æ—¶æ–‡ä»¶çš„æœ€å¤§å¤§å°ï¼Œå¦‚æœè®¾ç½®ä¸º0åˆ™ä¸ä¼šå†™ä¸´æ—¶æ–‡ä»¶ï¼Œ&lt;code&gt;proxy_temp_path&lt;/code&gt;è®¾ç½®ä¸´æ—¶æ–‡ä»¶çš„è·¯å¾„ã€‚&lt;/p&gt;

&lt;h2 id=&#34;è§£å†³æ–¹æ¡ˆ&#34;&gt;è§£å†³æ–¹æ¡ˆ&lt;/h2&gt;

&lt;p&gt;Nginxé…ç½®ï¼Œè®¾ç½®ä¸€ä¸ªNginxç”¨æˆ·æœ‰æƒè®¿é—®çš„ä¸´æ—¶ç›®å½•ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;proxy_temp_path /home/appops/nginx_proxy_temp 1 2;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;nginx-temp-file-2.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¹Ÿå¯ä»¥é€šè¿‡ç¦ç”¨æ‰ä»£ç†å“åº”ç¼“å­˜æ¥å¤„ç†è¿™ç§æƒ…å†µï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;proxy_max_temp_file_size 0;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ–è€…&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;proxy_buffering off;
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>ã€Šå¿«å­¦Scalaã€‹è¯»ä¹¦ç¬”è®°</title>
      <link>http://vonzhou.com/2018/scala-impatient/</link>
      <pubDate>Mon, 31 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>http://vonzhou.com/2018/scala-impatient/</guid>
      <description>

&lt;p&gt;è¿™æœ¬ä¹¦æˆ‘æ˜¯2013å¹´ä¹°çš„ï¼Œå½“æ—¶çœ‹äº†ä¸€éƒ¨åˆ†ï¼Œç„¶ååˆå¿˜äº†ï¼Œç°åœ¨é‡æ–°é˜…è¯»ã€‚&lt;/p&gt;

&lt;p&gt;Scalaå°†OOPå’Œå‡½æ•°å¼ç¼–ç¨‹æœ‰æœºç»“åˆï¼ŒåŠ¨é™å…¼å¤‡ã€‚å‰é¢çš„åŸºæœ¬æ‹›å¼é€šè¯»åï¼ŒåŸºæœ¬ä¸Šå¯ä»¥ç†è§£ã€‚ä½†æ˜¯åé¢çš„ç±»å‹ç³»ç»Ÿï¼Œåå˜å‹å˜ï¼Œå®šç•Œå»¶ç»­ç›®å‰è¿˜æä¸æ‡‚ï¼Œæš‚æ—¶ç•¥è¿‡ã€‚&lt;/p&gt;

&lt;h2 id=&#34;1-åŸºç¡€&#34;&gt;1.åŸºç¡€&lt;/h2&gt;

&lt;p&gt;Scalaè§£é‡Šå™¨çš„ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;val,varå£°æ˜å€¼å’Œå˜é‡ã€‚&lt;/p&gt;

&lt;p&gt;æœ‰7ä¸­æ•°å€¼ç±»å‹ï¼šByte,Char,Short,Int,Long,Float,Double,Booleanï¼Œå’ŒJavaä¸åŒçš„æ˜¯è¿™äº›éƒ½æ˜¯ç±»ã€‚&lt;/p&gt;

&lt;p&gt;Scalaä¸­ä½¿ç”¨æ–¹æ³•è¿›è¡Œæ•°å€¼ç±»å‹çš„è½¬æ¢ï¼Œè€Œä¸æ˜¯å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚&lt;/p&gt;

&lt;p&gt;å’Œ&lt;code&gt;Javaï¼ŒC++&lt;/code&gt;ä¸åŒçš„æ˜¯ï¼ŒScalaä¸­æ²¡æœ‰++,&amp;ndash;æ“ä½œç¬¦ï¼Œè¦ä½¿ç”¨+=1ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;()&lt;/code&gt;æ“ä½œç¬¦èƒŒåçš„å®ç°åŸç†æ˜¯&lt;code&gt;apply&lt;/code&gt;æ–¹æ³•ã€‚&lt;/p&gt;

&lt;h2 id=&#34;2-æ§åˆ¶ç»“æ„å’Œå‡½æ•°&#34;&gt;2.æ§åˆ¶ç»“æ„å’Œå‡½æ•°&lt;/h2&gt;

&lt;p&gt;ifè¡¨è¾¾å¼æœ‰å€¼ã€‚&lt;/p&gt;

&lt;p&gt;{}å—ä¹Ÿæœ‰å€¼ï¼Œå€¼æ˜¯æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚è¿™ä¸ªç‰¹æ€§å¯¹äºè¦åˆ†å¤šæ­¥æ¥åˆå§‹åŒ–valçš„æƒ…å†µå¾ˆæœ‰ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;Unitç­‰åŒäºJavaï¼ŒC++ä¸­çš„voidã€‚&lt;/p&gt;

&lt;p&gt;èµ‹å€¼è¯­å¥æœ¬èº«æ²¡æœ‰å€¼ï¼Œæ˜¯Unitã€‚&lt;/p&gt;

&lt;p&gt;å®šä¹‰å‡½æ•°çš„æ—¶å€™ï¼Œæœ€å¥½ä¸ä½¿ç”¨returnã€‚&lt;/p&gt;

&lt;p&gt;Scalaä¸­æ²¡æœ‰Checked Exceptionã€‚&lt;/p&gt;

&lt;h2 id=&#34;3-æ•°ç»„ç›¸å…³æ“ä½œ&#34;&gt;3.æ•°ç»„ç›¸å…³æ“ä½œ&lt;/h2&gt;

&lt;p&gt;å®šé•¿æ•°ç»„æ˜¯Array, å˜é•¿æ•°ç»„æ˜¯ArrayBufferã€‚&lt;/p&gt;

&lt;p&gt;ç”¨ &lt;code&gt;for(e &amp;lt;- arr)&lt;/code&gt; éå†å…ƒç´ ã€‚&lt;/p&gt;

&lt;p&gt;ç”¨ &lt;code&gt;for(e &amp;lt;- arr if ...) yield ...&lt;/code&gt; è½¬æ¢æ•°ç»„ã€‚&lt;/p&gt;

&lt;p&gt;Scalaæ•°ç»„å’ŒJavaæ•°ç»„äº’æ“ä½œã€‚&lt;/p&gt;

&lt;h2 id=&#34;4-æ˜ å°„å’Œå…ƒç»„&#34;&gt;4.æ˜ å°„å’Œå…ƒç»„&lt;/h2&gt;

&lt;p&gt;Scalaä¸­æ²¡æœ‰å¯å˜çš„æ ‘å½¢æ˜ å°„ï¼Œå¯ä»¥é€‰æ‹©Javaçš„TreeMapã€‚&lt;/p&gt;

&lt;p&gt;å…ƒç»„å¯ä»¥ç”¨äºå‡½æ•°éœ€è¦è¿”å›ä¸æ­¢ä¸€ä¸ªå€¼çš„æƒ…å†µã€‚&lt;/p&gt;

&lt;h2 id=&#34;5-ç±»&#34;&gt;5.ç±»&lt;/h2&gt;

&lt;p&gt;Scalaä¸ºæ¯ä¸ªå­—æ®µç”Ÿæˆ&lt;code&gt;getterï¼Œsetter&lt;/code&gt;æ–¹æ³•ï¼Œä¸è¿‡å¯ä»¥é€šè¿‡&lt;code&gt;private,val,var,private[this]&lt;/code&gt;æ§åˆ¶è¿™ä¸ªè¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœéœ€è¦JavaBeansç‰ˆçš„&lt;code&gt;getterï¼Œsetter&lt;/code&gt;æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨BeanPropertyæ³¨è§£ã€‚&lt;/p&gt;

&lt;p&gt;Scalaä¸­ç±»æœ‰ä¸€ä¸ªä¸»æ„é€ å™¨ï¼ˆprimary constructorï¼‰ï¼Œä»»æ„å¤šä¸ªè¾…åŠ©æ„é€ å™¨ï¼ˆauxiliary constructorï¼‰ï¼Œåç§°æ˜¯thisã€‚æ¯ä¸ªè¾…åŠ©æ„é€ å™¨éƒ½å¿…é¡»å¼€å§‹äºè°ƒç”¨å…¶ä»–è¾…åŠ©æ„é€ å™¨æˆ–è€…ä¸»æ„é€ å™¨ã€‚&lt;/p&gt;

&lt;p&gt;ç»ƒä¹ 5.æ³¨æ„BeanPropertyåŒ…è·¯å¾„å˜äº†ï¼Œ&lt;code&gt;scala.beans.BeanProperty&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;âœ  ch05 git:(master) scalac Student.scala  
âœ  ch05 git:(master) javap -private Student
Compiled from &amp;quot;Student.scala&amp;quot;
public class Student {
  private java.lang.String name;
  private long id;
  public java.lang.String name();
  public void name_$eq(java.lang.String);
  public void setName(java.lang.String);
  public long id();
  public void id_$eq(long);
  public void setId(long);
  public java.lang.String getName();
  public long getId();
  public Student(java.lang.String, long);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;6-å¯¹è±¡&#34;&gt;6.å¯¹è±¡&lt;/h2&gt;

&lt;p&gt;åœ¨Javaä¸­ä¼šä½¿ç”¨å•ä¾‹å¯¹è±¡çš„åœ°æ–¹ï¼ŒScalaä¸­ç”¨å¯¹è±¡ï¼Œå•ä¾‹æ¨¡å¼ã€‚&lt;/p&gt;

&lt;p&gt;ææ¸…ç±»å’Œä¼´ç”Ÿå¯¹è±¡ï¼ˆcompanion objectï¼‰çš„å…³ç³»ã€‚&lt;/p&gt;

&lt;p&gt;å®šä¹‰æšä¸¾çš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;h2 id=&#34;7-åŒ…å’Œå¼•å…¥&#34;&gt;7.åŒ…å’Œå¼•å…¥&lt;/h2&gt;

&lt;p&gt;åŒ…å¯¹è±¡ï¼ˆpackage objectï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å£°æ˜åŒ…å¼•å…¥ã€‚&lt;/p&gt;

&lt;h2 id=&#34;8-ç»§æ‰¿&#34;&gt;8.ç»§æ‰¿&lt;/h2&gt;

&lt;p&gt;è¦çŸ¥é“Scalaçš„ç»§æ‰¿å±‚çº§ã€‚&lt;/p&gt;

&lt;p&gt;èƒ½çœ‹æ‡‚ï¼Œä½†æ˜¯è‡ªå·±æ€•æ˜¯å†™ä¸å‡ºæ¥ï¼Œéœ€è¦ç»ƒä¹ ã€‚&lt;/p&gt;

&lt;h2 id=&#34;9-æ–‡ä»¶å’Œæ­£åˆ™è¡¨è¾¾å¼&#34;&gt;9.æ–‡ä»¶å’Œæ­£åˆ™è¡¨è¾¾å¼&lt;/h2&gt;

&lt;p&gt;ç”¨å®ŒSourceå¯¹è±¡ï¼Œè¦è®°å¾—closeã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœè¦æŸ¥çœ‹æŸä¸ªå­—ç¬¦ï¼Œä½†æ˜¯ä¸å¤„ç†æ‰å®ƒï¼Œä½¿ç”¨source.bufferedæ–¹æ³•ï¼ˆç±»ä¼¼C++ä¸­çš„&lt;code&gt;istream::peek&lt;/code&gt;ï¼Œæˆ–javaä¸­çš„&lt;code&gt;PushbackInputStream&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;Scalaæ²¡æœ‰æä¾›è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶çš„æ–¹æ³•ï¼Œè¦ä½¿ç”¨javaç±»åº“ã€‚å†™æ–‡ä»¶ä¹Ÿè¦ä½¿ç”¨javaåº“&lt;code&gt;java.io.PrintWriter&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å¯ä»¥ç¼–å†™shellè„šæœ¬ã€‚&lt;/p&gt;

&lt;h2 id=&#34;10-ç‰¹è´¨&#34;&gt;10.ç‰¹è´¨&lt;/h2&gt;

&lt;p&gt;Scalaå’ŒJavaä¸èƒ½å¤šé‡ç»§æ‰¿ï¼ˆè±å½¢ç»§æ‰¿é—®é¢˜ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;ç‰¹è´¨å¯ä»¥åŒæ—¶æ‹¥æœ‰æŠ½è±¡æ–¹æ³•å’Œå…·ä½“æ–¹æ³•ï¼Œç±»å¯ä»¥å®ç°å¤šä¸ªç‰¹è´¨ã€‚&lt;/p&gt;

&lt;p&gt;å®ç°ç‰¹è´¨ç”¨çš„extendsï¼Œè€Œä¸æ˜¯implementsï¼Œå®ç°å¤šä¸ªç‰¹è´¨ç”¨withï¼ˆå¥‡æ€ªä¹ˆ? &lt;code&gt;extends A with B&lt;/code&gt;ï¼Œ&lt;code&gt;A with B&lt;/code&gt;å…ˆæ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œç„¶åç”±ç±»æ‰©å±•ï¼‰ã€‚æ‰€æœ‰Javaæ¥å£éƒ½å¯ä½œä¸ºScalaçš„traitä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;æ³¨æ„å¼•å…¥ç‰¹è´¨åï¼Œç±»çš„æ„é€ å™¨æ‰§è¡Œé¡ºåºã€‚&lt;/p&gt;

&lt;p&gt;ç‰¹è´¨ä¸èƒ½æœ‰æ„é€ å™¨å‚æ•°ã€‚&lt;/p&gt;

&lt;p&gt;è‡ªèº«ç±»å‹ï¼ˆself typeï¼‰å¯ä»¥è§£å†³ç‰¹è´¨é—´çš„å¾ªç¯ä¾èµ–ã€‚&lt;/p&gt;

&lt;h2 id=&#34;11-æ“ä½œç¬¦&#34;&gt;11.æ“ä½œç¬¦&lt;/h2&gt;

&lt;p&gt;æ“ä½œç¬¦çš„ä¼˜å…ˆçº§ã€‚&lt;/p&gt;

&lt;p&gt;apply, updateå¯ä»¥ç®€åŒ–æ–¹æ³•çš„è°ƒç”¨ã€‚&lt;/p&gt;

&lt;p&gt;unapplyï¼ŒunapplySeqå’Œæ¨¡å¼åŒ¹é…çš„å…³ç³»ã€‚&lt;/p&gt;

&lt;h2 id=&#34;12-é«˜é˜¶å‡½æ•°&#34;&gt;12.é«˜é˜¶å‡½æ•°&lt;/h2&gt;

&lt;p&gt;å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ã€‚&lt;/p&gt;

&lt;h2 id=&#34;13-é›†åˆ&#34;&gt;13.é›†åˆ&lt;/h2&gt;

&lt;p&gt;æ‰€æœ‰é›†åˆéƒ½æ‰©å±•è‡ªIterable traitã€‚&lt;/p&gt;

&lt;p&gt;Javaä¸­ArrayListå’ŒLinkedListå®ç°äº†å…±åŒçš„Listæ¥å£ï¼Œä½¿å¾—ç¼–å†™è¦è€ƒè™‘éšæœºè®¿é—®æ•ˆç‡çš„ä»£ç æ¯”è¾ƒå›°éš¾ï¼Œåæ¥åŠ å…¥çš„RandomAccessï¼ˆ1.4ï¼‰å°±æ˜¯åº”å¯¹è¿™ä¸ªçš„ã€‚&lt;/p&gt;

&lt;p&gt;Scalaä¼˜å…ˆé‡‡ç”¨ä¸å¯å˜é›†åˆã€‚&lt;/p&gt;

&lt;h2 id=&#34;14-æ¨¡å¼åŒ¹é…å’Œæ ·ä¾‹ç±»&#34;&gt;14.æ¨¡å¼åŒ¹é…å’Œæ ·ä¾‹ç±»&lt;/h2&gt;

&lt;p&gt;Scalaä¸­æ¨¡å¼åŒ¹é…matchæ— éœ€åœ¨æ¯ä¸ªåˆ†æ”¯åé¢breakã€‚&lt;/p&gt;

&lt;p&gt;æ”¯æŒå®ˆå«ï¼Œè€Œæ— éœ€æŠŠæ¯ç§æƒ…å†µçš„caseéƒ½åˆ—å‡ºæ¥ã€‚&lt;/p&gt;

&lt;p&gt;å€¾å‘äºä½¿ç”¨ç±»å‹æ¨¡å¼åŒ¹é…ï¼Œè€Œä¸æ˜¯isInstanceOfæ“ä½œç¬¦ã€‚åŒ¹é…å‘ç”Ÿåœ¨è¿è¡Œæ—¶ï¼Œæ‰€ä»¥æ³›å‹ä¼šæ“¦é™¤ã€‚&lt;/p&gt;

&lt;p&gt;æ¨¡å¼åŒ¹é…ç”¨äºæ•°ç»„ï¼Œåˆ—è¡¨ï¼Œå…ƒç»„èƒŒåæ˜¯æå–å™¨æœºåˆ¶ï¼Œå¯¹åº”çš„ä¼´ç”Ÿå¯¹è±¡å®ç°unapplyï¼ŒunapplySeqæ–¹æ³•ã€‚æ¯”å¦‚Arrayçš„ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-scala&#34;&gt;/** Called in a pattern match like `{ case Array(x,y,z) =&amp;gt; println(&#39;3 elements&#39;)}`.
   *
   *  @param x the selector value
   *  @return  sequence wrapped in a [[scala.Some]], if `x` is a Seq, otherwise `None`
   */
  def unapplySeq[T](x: Array[T]): Option[IndexedSeq[T]] =
    if (x == null) None else Some(x.toIndexedSeq)
    // !!! the null check should to be necessary, but without it 2241 fails. Seems to be a bug
    // in pattern matcher.  @PP: I noted in #4364 I think the behavior is correct.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ ·ä¾‹ç±»ï¼ˆ&lt;code&gt;Case Class&lt;/code&gt;ï¼‰çš„ä½¿ç”¨åœºæ™¯å’Œä½œç”¨ã€‚Listå°±æ˜¯ç”¨æ ·ä¾‹ç±»å®ç°çš„ã€‚&lt;/p&gt;

&lt;p&gt;æ¨èä½¿ç”¨Optionè¡¨ç¤ºå¯æœ‰å¯æ— çš„ä¸œè¥¿ã€‚&lt;/p&gt;

&lt;h2 id=&#34;15-æ³¨è§£&#34;&gt;15.æ³¨è§£&lt;/h2&gt;

&lt;p&gt;Annotationï¼ŒStaticAnnotation, ClassfileAnnotationã€‚&lt;/p&gt;

&lt;h2 id=&#34;17-ç±»å‹å‚æ•°&#34;&gt;17.ç±»å‹å‚æ•°&lt;/h2&gt;

&lt;p&gt;ç±»å‹å˜é‡ç•Œå®šï¼Œä¸Šç•Œ&lt;code&gt;&amp;lt;:&lt;/code&gt;ï¼Œä¸‹ç•Œ&lt;code&gt;&amp;gt;:&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;è§†å›¾ç•Œå®š&lt;code&gt;&amp;lt;%&lt;/code&gt;ï¼Œè¡¨ç¤ºå¯ä»¥éšå¼è½¬æ¢çš„æƒ…å†µã€‚&lt;/p&gt;

&lt;p&gt;è¦å®ä¾‹åŒ–ä¸€ä¸ª&lt;code&gt;Array[T]&lt;/code&gt;,éœ€è¦ä¸€ä¸ª&lt;code&gt;Manifest[T]&lt;/code&gt;å¯¹è±¡ï¼Œè¿™ä¹ˆå¤æ‚ï¼Ÿå› ä¸ºJVMä¸­æ³›å‹æ“¦é™¤ã€‚&lt;/p&gt;

&lt;h2 id=&#34;è¯¾åä¹ é¢˜ç¼–ç¨‹&#34;&gt;è¯¾åä¹ é¢˜ç¼–ç¨‹&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/vonzhou/ScalaImpatient&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;github&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;è¯»äº 2018.12.29 æ­å·&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
  </channel>
</rss>